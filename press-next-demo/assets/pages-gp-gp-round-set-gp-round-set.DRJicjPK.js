import{P as e}from"./press-datetime-picker-popup-plus.CLkNnlTL.js";import{P as t}from"./press-picker-plus-popup-plus.CiZ6QMnx.js";import{D as n}from"./handler.DhQwUGnR.js";import{P as o}from"./press-empty-gp.D7h0ZbNb.js";import{_ as i,c as s,J as r,b as c,F as l,l as a,f as d,r as u,o as m,w as p,i as k,e as R,a as h}from"./index-DdqTp3oi.js";import"./press-popup-plus.BG5D9r4L.js";import"./press-picker-plus.BjnQBL0j.js";import"./number.BhcN_qOs.js";import"./scroll-view.Bd72usm9.js";import"./handler-helper.CgnxMxwO.js";import"./index.v7nL_M0C.js";const C=[{roundName:"256进128",time:"3月18日 10:00",boDesc:"一局胜负",canSetBo:!0,canSetTime:!0},{roundName:"32进16",time:"3月18日 10:00",boDesc:"一局胜负",canSetBo:!0,canSetTime:!0},{roundName:"16进8",time:"3月18日 10:00",boDesc:"一局胜负",canSetBo:!0,canSetTime:!0},{roundName:"8进4",time:"3月18日 10:00",boDesc:"一局胜负",canSetBo:!0,canSetTime:!0},{roundName:"决赛",time:"3月18日 10:00",boDesc:"一局胜负",canSetBo:!0,canSetTime:!0}];const v={1:"一局胜负",3:"三局两胜",5:"五局三胜",7:"七局四胜"};const S=i({components:{PressGpRoundSet:i({components:{PressGpRoundSet:i({name:"RoundSetting",components:{PressEmpty:o},props:{roundList:{type:Array,default:()=>[]}},data:()=>({emptyText:"两个以上队伍报名后<br/>将在此显示轮次"}),computed:{},mounted(){},methods:{clickItem(e,t){this.$emit("clickItem",e,t)},clickStartAllRound(e,t){e.hasStarted||this.$emit("clickStartAllRound",e,t)},clickRoundBo(e,t){e.canSetBo&&this.$emit("clickRoundBo",e,t)},clickRoundTime(e,t){e.canSetTime&&this.$emit("clickRoundTime",e,t)}}},[["render",function(e,t,n,o,i,C){const v=u("PressEmpty");return m(),s("div",{class:"press-round"},[r(e.$slots,"back-btn",{},void 0,!0),n.roundList.length?(m(),s("div",{key:0,class:"press-round__main"},[c("div",{class:"press-round__table-head"},[c("div",{class:"press-round__table-num"}," 轮次 "),c("div",{class:"press-round__table-setting"}," 开赛设置 "),c("div",{class:"press-round__table-way"}," 决胜方式 "),c("div",{class:"press-round__table-operation"}," 操作 ")]),c("div",{class:"press-round__table-main"},[(m(!0),s(l,null,a(n.roundList,((e,t)=>(m(),s("div",{key:t,class:k(["press-round__table-item",{"press-round__table-item--active":e.active}]),onClick:p((n=>C.clickItem(e,t)),["stop"])},[c("div",{class:"press-round__table-num"},R(e.roundName),1),c("div",{class:"press-round__table-setting",onClick:p((()=>C.clickRoundTime(e,t)),["stop"])},[c("div",{class:"press-round__table-setting-text"},R(e.time),1),e.canSetTime?(m(),s("div",{key:0,class:"iconfont icon-edit-type-2"})):h("",!0)],8,["onClick"]),c("div",{class:k(["press-round__table-way",{"press-round__table-way-disable":!e.canSetBo}]),onClick:p((()=>C.clickRoundBo(e,t)),["stop"])},[c("div",{class:"press-round__table-way-text"},R(e.boDesc),1),e.canSetBo?(m(),s("div",{key:0,class:"iconfont icon-triangle"})):h("",!0)],10,["onClick"]),c("div",{class:k(["press-round__table-operation",{"press-round__table-operation-disable":e.hasStarted}]),onClick:p((()=>C.clickStartAllRound(e,t)),["stop"])},R(e.hasStarted?"已开赛":"整轮开赛"),11,["onClick"])],10,["onClick"])))),128))])])):(m(),s("div",{key:1,class:"empty-container"},[d(v,{text:i.emptyText},null,8,["text"])]))])}],["__scopeId","data-v-7262ceb5"]]),PressPickerPlusPopupPlus:t,PressDatetimePickerPlus:e},props:{roundList:{type:Array,default:()=>[]}},data(){return{dialogs:{datetimePicker:!1,picker:!1,pickerDefaultIndex:0},pickerColumns:[],datePicker:{title:"选择时间",showToolbar:!0,minHour:10,maxHour:20,minDate:(new Date).getTime(),maxDate:new Date(2099,10,1).getTime(),currentDate:(new Date).getTime(),confirm:()=>{}},currentRound:{},innerRoundList:this.roundList}},watch:{roundList:{handler(e){this.innerRoundList=e},immediate:!0,deep:!0}},methods:{clickItem(e){this.innerClickItem(e)},innerClickItem(e){this.innerRoundList.forEach((e=>{this.$set(e,"active",!1)})),this.currentRound=e,this.$set(e,"active",!0)},clickStartAllRound(e){this.innerClickItem(e),n.show({title:"确认整轮开始比赛",content:"本轮有2个对局设置了超时未到自动弃权，开赛后，将通知玩家进行比赛，是否开赛？",cancelText:"取消",confirmText:"确认"}).then((()=>{this.$emit("clickStartAllRound",{currentRound:this.currentRound})})).catch((()=>{}))},clickRoundTime(e){this.innerClickItem(e),this.dialogs.datetimePicker=!0},clickRoundBo(e){this.innerClickItem(e),this.pickerColumns=Object.keys(v).map((e=>({value:e,text:v[e]}))),this.dialogs.picker=!0,this.dialogs.pickerDefaultIndex=this.pickerColumns.findIndex((t=>t.value==e.bo_type))||0,this.resetDefaultIndex(0,this.dialogs.pickerDefaultIndex)},onCancelPicker(){this.dialogs.picker=!1},onConfirmPicker({value:e}){this.dialogs.picker=!1,this.$emit("setRoundBo",{currentRound:this.currentRound,value:e.value})},datePickerConfirm(e){this.$emit("setRoundTime",{value:e,currentRound:this.currentRound}),this.dialogs.datetimePicker=!1},formatter:(e,t)=>"year"===e?"".concat(t,"年"):"month"===e?"".concat(t,"月"):"day"===e?"".concat(t,"日"):"hour"===e?"".concat(t,"时"):"minute"===e?"".concat(t,"分"):t,resetDefaultIndex(e,t){var n,o,i,s;null==(s=null==(i=null==(o=null==(n=this.$refs.picker)?void 0:n.$refs)?void 0:o.picker)?void 0:i.resetColumn)||s.call(i,e,t)}}},[["render",function(e,t,n,o,i,r){const c=u("PressGpRoundSet"),l=u("PressPickerPlusPopupPlus"),a=u("PressDatetimePickerPlus");return m(),s("div",{class:"page-wrap"},[d(c,{"round-list":i.innerRoundList,onClickItem:r.clickItem,onClickStartAllRound:r.clickStartAllRound,onClickRoundBo:r.clickRoundBo,onClickRoundTime:r.clickRoundTime},null,8,["round-list","onClickItem","onClickStartAllRound","onClickRoundBo","onClickRoundTime"]),d(l,{ref:"picker",show:i.dialogs.picker,"show-toolbar":"",title:"决胜方式",columns:i.pickerColumns,"default-index":i.dialogs.pickerDefaultIndex,onCancel:r.onCancelPicker,onConfirm:r.onConfirmPicker},null,8,["show","columns","default-index","onCancel","onConfirm"]),d(a,{show:i.dialogs.datetimePicker,"datetime-picker":i.datePicker,formatter:r.formatter,"z-index":1e4,onCancel:t[0]||(t[0]=()=>i.dialogs.datetimePicker=!1),onConfirm:r.datePickerConfirm},null,8,["show","datetime-picker","formatter","onConfirm"])])}]])},props:{},data:()=>({MOCK_ROUND_LIST:C.map((e=>({...e,active:!1})))}),methods:{clickItem(){},clickStartAllRound({currentRound:e}){console.log(">> clickStartAllRound",{currentRound:e})},setRoundTime({value:e,currentRound:t}){console.log(">> setRoundTime",{value:e,currentRound:t})},setRoundBo({value:e,currentRound:t}){console.log(">> setRoundBo",{value:e,currentRound:t})}}},[["render",function(e,t,n,o,i,r){const c=u("PressGpRoundSet");return m(),s("div",{class:"demo-wrap"},[d(c,{"round-list":i.MOCK_ROUND_LIST,onClickItem:r.clickItem,onClickStartAllRound:r.clickStartAllRound,onSetRoundBo:r.setRoundBo,onSetRoundTime:r.setRoundTime},null,8,["round-list","onClickItem","onClickStartAllRound","onSetRoundBo","onSetRoundTime"])])}]]);export{S as default};
