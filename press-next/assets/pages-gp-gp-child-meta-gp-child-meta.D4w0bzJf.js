import{_ as e,c as t,a,b as i,w as c,e as s,j as n,o,f as l,X as m,r as p}from"./index-DdqTp3oi.js";import{n as r}from"./object.Dyk2TGJi.js";const d=e({components:{PressGpChildMeta:e({name:"PressGpChildMeta",props:{childInfo:{type:Object,default:()=>({})},timeStampFormat:{type:Function,default:()=>r},getProvName:{type:Function,default:()=>r},getCityName:{type:Function,default:()=>r},isCanceled:{type:Boolean,default:!1}},emits:["clickChildName","gotoMap"],data:()=>({}),computed:{matchRuleConfig(){return this.childInfo&&this.childInfo.match_rule_cfg||{}},curJoinType(){return this.matchRuleConfig.pubg_rule_cfg?this.matchRuleConfig.pubg_rule_cfg.join_func:0},isKnockoutMatch(){var e;return 4==(null==(e=this.matchRuleConfig)?void 0:e.group_type)},isCycleMatch(){var e;return 8==(null==(e=this.matchRuleConfig)?void 0:e.group_type)},computedMap(){var e,t;return function(e=[]){if(Array.isArray(e)){if(1===e.length)return e[0].module_name||"";let t=[];return e.map((e=>(t.push(e.module_name||""),e))),t=t.map((e=>e.replace(/^(?:.*?模式)?\s*-\s*(.*)$/,((e,t)=>t)))),t=Array.from(new Set(t)),1===t.length?e[0].module_name||"":(t=t.slice(0,3),t.join(" | "))}return""}(((null==(t=null==(e=this.matchRuleConfig)?void 0:e.pubg_rule_cfg)?void 0:t.module_cfg)||[]).map((e=>1129===e.module_id?{...e,module_name:"龙狮迎冰雪-海岛"}:e)))},provinceAndCityName(){const e=this.getProvName(this.childInfo.province)||"";return e===this.computedCityName?e:"".concat(e).concat(this.computedCityName)},computedCityName(){return this.childInfo.province&&this.childInfo.city&&this.getCityName(this.childInfo.province,this.childInfo.city)||""},cycleMatchTime(){const{childInfo:e,formatTime:t}=this;return"".concat(t(e.act_start_time,"MM.dd hh:mm")," - ").concat(t(e.act_end_time,"MM.dd hh:mm"))}},mounted(){},methods:{formatTime(e,t){const{timeStampFormat:a}=this;let i="";return"function"==typeof a&&(i=a(e,t)),"function"==typeof i&&(i=a(e,t)),i||""},gotoMap(){this.$emit("gotoMap")},clickChildName(){this.$emit("clickChildName")}}},[["render",function(e,l,m,p,r,d){return m.childInfo&&Object.keys(m.childInfo).length?(o(),t("div",{key:0,class:"press-meta"},[i("div",{class:"press-meta__main"},[i("h4",{class:"press-meta__title press-meta__title--white"},[i("p",{class:"t-overflow",onClick:l[0]||(l[0]=c(((...e)=>d.clickChildName&&d.clickChildName(...e)),["stop"]))},s(m.childInfo.child_name),1)]),m.isCanceled?(o(),t("p",{key:0,class:"press-meta__canceled"}," 比赛已取消 ")):a("",!0),d.isCycleMatch?(o(),t("div",{key:1,class:"press-meta__labels press-meta__labels--yellow"},[i("span",{class:"span"},[i("i",{class:"iconfont icon-time"}),n(" "+s(d.cycleMatchTime),1)])])):a("",!0),d.matchRuleConfig&&Object.keys(d.matchRuleConfig).length?(o(),t("p",{key:2,class:"press-meta__labels"},[d.isCycleMatch?a("",!0):(o(),t("span",{key:0,class:"span"},[i("i",{class:"iconfont icon-time"}),n(" "+s(d.formatTime(1e3*m.childInfo.act_start_time,"MM.dd hh:mm"))+"开赛 ",1)])),i("span",{class:"span"},s(1==d.curJoinType?"团队赛":"个人赛"),1),d.isCycleMatch?(o(),t("span",{key:1,class:"span"},"匹配积分赛")):d.isKnockoutMatch?(o(),t("span",{key:2,class:"span"},"单败淘汰赛")):a("",!0),1==d.matchRuleConfig.utype_limit?(o(),t("span",{key:3,class:"span"},[i("i",{class:"iconfont icon-qq icon-top"}),n("QQ区")])):2==d.matchRuleConfig.utype_limit?(o(),t("span",{key:4,class:"span"},[i("i",{class:"iconfont icon-wx icon-top"}),n("微信区")])):a("",!0),d.matchRuleConfig&&d.matchRuleConfig.pubg_rule_cfg?(o(),t("span",{key:5,class:"span"},s(d.computedMap),1)):a("",!0)])):a("",!0),!m.isCanceled&&d.matchRuleConfig&&d.matchRuleConfig.pubg_rule_cfg&&2==d.matchRuleConfig.pubg_rule_cfg.online?(o(),t("p",{key:3,class:"press-meta__title press-meta__title--location",onClick:l[1]||(l[1]=c(((...e)=>d.gotoMap&&d.gotoMap(...e)),["stop"]))},[m.childInfo.lat?(o(),t("span",{key:0,class:"iconfont icon-location span"})):a("",!0),i("span",{class:"press-meta__location-text span"},"现场比赛："+s(m.childInfo.address_name||d.provinceAndCityName||""),1),m.childInfo.lat?(o(),t("span",{key:1,class:"span"},">")):a("",!0)])):a("",!0)])])):a("",!0)}],["__scopeId","data-v-08d65254"]])},data:()=>({isCanceled:!1,childInfo:{child_name:"子活动名称",act_start_time:"3048451680",act_end_time:"3048451680",lat:1,address_name:"山东德州",match_rule_cfg:{utype_limit:1,group_type:8,pubg_rule_cfg:{online:2,module_cfg:[{module_id:1075,game_view:1,module_name:"经典模式 - 海岛"}]}}},timeStampFormat:m}),methods:{gotoMap(){this.isCanceled=!this.isCanceled}}},[["render",function(e,a,i,c,s,n){const m=p("PressGpChildMeta");return o(),t("div",{class:"demo-wrap"},[l(m,{"child-info":s.childInfo,"time-stamp-format":s.timeStampFormat,"is-canceled":s.isCanceled,onGotoMap:n.gotoMap},null,8,["child-info","time-stamp-format","is-canceled","onGotoMap"])])}],["__scopeId","data-v-5842931a"]]);export{d as default};
