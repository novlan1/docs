import{_ as e,L as t,M as s,c as a,o as i,b as o,a as l,J as n,w as r,i as c,n as d,u as h,A as p,d as u,h as f,e as g,G as m,f as v,F as b,l as k,C as y}from"./index-DdqTp3oi.js";import{u as w,g as _}from"./index.Dc2DHEjX.js";import{P as C}from"./press-list.Bcv4-KBB.js";import{_ as x}from"./press-custom-header.vue_vue_type_script_setup_true_lang.D4hwJKMf.js";import{E as D}from"./press-gp-empty.DuM7n7JR.js";import{r as M}from"./number.BhcN_qOs.js";import{t as j}from"./touch.B3xmXKM9.js";import"./scroll-view.Bd72usm9.js";let W=[];const B=e({name:"PressSwipeCell",options:{...s},mixins:[j],props:{disabled:{type:Boolean,default:!1},leftWidth:{type:Number,default:0},rightWidth:{type:Number,default:0},asyncClose:{type:Boolean,default:!1},name:{type:String,default:""},...t},emits:["click","open","close"],data:()=>({catchMove:!1,wrapperStyle:"",offset:0}),watch:{leftWidth:{handler(e=0){this.offset>0&&this.swipeMove(e)}},rightWidth:{handler(e=0){this.offset<0&&this.swipeMove(-e)}}},created(){this.offset=0,W.push(this)},destroyed(){W=W.filter((e=>e!==this))},methods:{setData(e){Object.keys(e).forEach((t=>{this[t]=e[t]}))},open(e){const{leftWidth:t,rightWidth:s}=this,a="left"===e?t:-s;this.swipeMove(a),this.$emit("open",{position:e,name:this.name})},close(){this.swipeMove(0)},swipeMove(e=0){this.offset=M(e,-this.rightWidth,this.leftWidth);const t="translate3d(".concat(this.offset,"px, 0, 0)"),s=this.dragging?"none":"transform .6s cubic-bezier(0.18, 0.89, 0.32, 1)";this.setData({wrapperStyle:"\n        -webkit-transform: ".concat(t,";\n        -webkit-transition: ").concat(s,";\n        transform: ").concat(t,";\n        transition: ").concat(s,";\n      ")})},swipeLeaveTransition(){const{leftWidth:e,rightWidth:t}=this,{offset:s}=this;t>0&&-s>.3*t?this.open("right"):e>0&&s>.3*e?this.open("left"):this.swipeMove(0),this.setData({catchMove:!1})},startDrag(e){this.disabled||(this.startOffset=this.offset,this.touchStart(e))},noop(){},onDrag(e){this.disabled||(this.touchMove(e),"horizontal"===this.direction&&(this.dragging=!0,W.filter((e=>e!==this&&0!==e.offset)).forEach((e=>e.close())),this.setData({catchMove:!0}),this.swipeMove(this.startOffset+this.deltaX)))},endDrag(){this.disabled||(this.dragging=!1,this.swipeLeaveTransition())},onClick(e){const{key:t="outside"}=e.currentTarget.dataset;this.$emit("click",t),this.offset&&(this.asyncClose?this.$emit("close",{position:t,instance:this,name:this.name}):this.swipeMove(0))}}},[["render",function(e,t,s,h,p,u){return i(),a("div",{class:c(["press-swipe-cell",e.customClass]),"data-key":"cell",onClick:t[2]||(t[2]=r(((...e)=>u.onClick&&u.onClick(...e)),["stop","prevent"])),onTouchstart:t[3]||(t[3]=(...e)=>u.startDrag&&u.startDrag(...e)),onTouchmoveCapture:t[4]||(t[4]=(...e)=>u.onDrag&&u.onDrag(...e)),onTouchend:t[5]||(t[5]=(...e)=>u.endDrag&&u.endDrag(...e)),onTouchcancel:t[6]||(t[6]=(...e)=>u.endDrag&&u.endDrag(...e))},[o("div",{style:d(p.wrapperStyle),class:c(["press-swipe-cell__content",p.offset?"press-swipe-cell__content--moved":""])},[s.leftWidth?(i(),a("div",{key:0,class:"press-swipe-cell__left","data-key":"left",onClick:t[0]||(t[0]=r(((...e)=>u.onClick&&u.onClick(...e)),["stop","prevent"]))},[n(e.$slots,"left",{},void 0,!0)])):l("",!0),n(e.$slots,"default",{},void 0,!0),s.rightWidth?(i(),a("div",{key:1,class:"press-swipe-cell__right","data-key":"right",onClick:t[1]||(t[1]=r(((...e)=>u.onClick&&u.onClick(...e)),["stop","prevent"]))},[n(e.$slots,"right",{},void 0,!0)])):l("",!0)],6)],34)}],["__scopeId","data-v-653d2804"]]),L=h({__name:"press-gp-message-list-item",props:{item:{default:()=>({})}},emits:["onClickDetail","onDelete"],setup(e,{emit:t}){const s=t,n=p(!1),c=p(null),d=()=>{n.value=!1};return(e,t)=>(i(),u(B,{"right-width":65,onOpen:t[2]||(t[2]=t=>{return s=e.item,c.value!==s.uniqueKey&&(n.value=!1),void(c.value=s.uniqueKey);var s}),onClose:d},{right:f((()=>[o("div",{class:"flex h-full w-full items-center justify-center border-0 border-y-0.04 border-solid border-[rgba(33,33,36,0.08)] bg-[rgba(229,69,69,1)]",onClick:t[1]||(t[1]=r((t=>{return a=e.item,"function"==typeof(null==(i=t)?void 0:i.stopPropagation)&&i.stopPropagation(),void(n.value?s("onDelete",a,(()=>{n.value=!1})):n.value=!0);var a,i}),["stop"]))},g(n.value?"确认删除":"删除"),1)])),default:f((()=>[o("div",{class:"relative box-border flex h-5.12 w-full items-center border-0 border-b-0.04 border-solid border-[rgba(33,33,36,0.08)] px-1.28 py-0.96 active:bg-[#f2f3f5]",onClick:t[0]||(t[0]=r((t=>{return a=e.item,void s("onClickDetail",a);var a}),["stop"]))},[o("div",{class:"relative"},[o("img",{src:e.item.avatar,class:"h-3.2 w-3.2 border-0.04 border-solid border-[rgba(105,105,105,1)]"},null,8,["src"]),e.item.unreadCount?(i(),a("div",{key:0,class:"absolute right-_0.64 top-_0.24 h-1.28 min-w-1.28 rounded-0.64 bg-[#e54545]"},[o("div",{class:"text-center text-0.8 leading-1.28 text-[#fff]"},g(e.item.unreadCount>99?"99":e.item.unreadCount),1)])):l("",!0)]),o("div",{class:"ml-0.96"},[o("div",{class:"text-1.12 text-[#212124]"},g(e.item.nick),1),e.item.content?(i(),a("div",{key:0,class:"mt-0.32 w-19.04 overflow-hidden text-ellipsis whitespace-nowrap text-0.96 text-[rgba(33,33,36,0.75)]"},g(e.item.content),1)):l("",!0)]),o("div",{class:"absolute right-1.28 text-right text-0.96 text-[rgba(33,33,36,0.6)]"},g(e.item.time),1)])])),_:1}))}}),T=e(h({__name:"press-gp-message-list",props:{title:{default:""},msgLoading:{type:Boolean,default:!1},msgFinished:{type:Boolean,default:!0},messageList:{default:()=>[]}},emits:["onBack","clearAway","loadmore","update:loading","onDelete","onClickDetail"],setup(e,{emit:t}){const{statusBarHeight:s,headerHeight:o}=w(),l=m((()=>"background: #fff;padding-top:".concat(s.value,"px;height:").concat(o.value,"px"))),n=m((()=>"height: ".concat(o.value,"px;line-height: ").concat(o.value,"px"))),r=e,c=m({get:()=>r.msgLoading||!1,set:e=>p("update:loading",e)}),d=m((()=>r.messageList||[])),h=m((()=>r.msgFinished)),p=t,g=()=>{console.log("onBack"),p("onBack")},y=()=>{p("clearAway")},_=()=>{p("loadmore")},M=e=>{p("onClickDetail",e)},j=e=>{p("onDelete",e)};return(e,t)=>(i(),a("div",{class:"message-list-page flex h-full w-full flex-col overflow-hidden bg-[#fcfcfc] bg-[url(https://image-1251917893.file.myqcloud.com/tip-project/pubg/pubg-match/gp-rank/vertical/bg-new.jpg)] bg-fullauto bg-center-top bg-no-repeat"},[v(x,{title:"消息中心","header-icon-class":"icon-sweep active:opacity-60","header-style":l.value,"placeholder-style":n.value,onGoBack:g,onClickIcon:y},null,8,["header-style","placeholder-style"]),d.value&&d.value.length>0?(i(),a("div",{key:0,class:"flex-1 overflow-auto"},[v(C,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),finished:h.value,"finished-text":"",onLoad:_},{default:f((()=>[(i(!0),a(b,null,k(d.value,((e,t)=>(i(),u(L,{key:t,item:e,onOnClickDetail:M,onOnDelete:j},null,8,["item"])))),128))])),_:1},8,["modelValue","finished"])])):(i(),a("div",{key:1,class:"mt-20.64"},[v(D,{title:"暂无数据"})]))]))}}),[["__scopeId","data-v-abeb4334"]]),A=e(h({__name:"gp-message-list",setup(e){const t=Array.from({length:20}).map(((e,t)=>({unreadCount:t,nick:"杨-".concat(t),content:"垃圾技术，垃圾代码，垃圾长期主义，表演性质的项目",time:"2022.12.12 12:12",avatar:"https://thirdqq.qlogo.cn/g?b=oidb&k=HFh953g22kPgQny1h7KITQ&kti=ZJJzkQAAAAE&s=640&t=1556998035"}))),s=()=>{_({home:"/",isHomeTabBar:!0})};return(e,o)=>(i(),a("div",{class:"demo-wrap demo-wrap--gp-iconfont"},[v(T,{"message-list":y(t),onOnBack:s},null,8,["message-list"])]))}}),[["__scopeId","data-v-9a9859ac"]]);export{A as default};
