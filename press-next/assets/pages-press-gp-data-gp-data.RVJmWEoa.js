import{_ as s,c as e,o as t,b as l,e as a,w as i,F as r,l as u,a as o,i as n,j as p,D as d,E as c,u as m,G as _,A as h,H as y,I as v,J as k,d as T,f as R,h as f}from"./index-DdqTp3oi.js";import{N as g}from"./number.2DP956Ms.js";import{P as w}from"./press-list.Bcv4-KBB.js";import{E as b}from"./press-gp-empty.DuM7n7JR.js";import"./scroll-view.Bd72usm9.js";const x=s({props:{myResult:{type:Object,default:()=>({})},isShowRTX:{type:Boolean,default:!1}},computed:{showNick(){const s=this.myResult.user_result_list[0],e=s.nick||"";return this.isShowRTX&&s.wxwork_eng_name||e}},methods:{clickHeader(){this.$emit("clickHeader")},survivalMinutes:(s=0)=>isNaN(s)?0:(s/60).toFixed(1)}},[["render",function(s,r,u,o,n,p){return t(),e("div",{class:"press-data press-data--fixed",onClick:r[0]||(r[0]=i(((...s)=>p.clickHeader&&p.clickHeader(...s)),["stop"]))},[l("div",{class:"press-data__head"},[l("p",null,"玩家"),l("p",null,"淘汰"),l("p",null,"助攻"),l("p",null,"伤害"),l("p",null,"时间(分)"),l("p",null,"治疗量"),l("p",null,"救援"),l("p",null,"积分")]),l("div",{class:"press-data__content"},[l("div",{class:"press-data__box"},[l("div",{class:"press-data__item press-data__item--highlight"},[l("p",null,a(p.showNick),1),l("p",null,a(u.myResult.user_result_list[0].elimination||0),1),l("p",null,a(u.myResult.user_result_list[0].assist||0),1),l("p",null,a((u.myResult.user_result_list[0].harm||0)/100),1),l("p",null,a(p.survivalMinutes(u.myResult.user_result_list[0].survival)),1),l("p",null,a((u.myResult.user_result_list[0].cure||0)/100),1),l("p",null,a(u.myResult.user_result_list[0].rescue||0),1),l("p",null,a(u.myResult.user_result_list[0].score||0),1)])])])])}],["__scopeId","data-v-d33729e2"]]);const L=s({props:{myResult:{type:Object,default:()=>({})},curResult:{type:Object,default:()=>({})},isShowRTX:{type:Boolean,default:!1},myUid:{type:String,default:""}},data:()=>({headList:["玩家","淘汰","助攻","伤害","时间(分)","治疗量","救援","积分"].map(((s,e)=>({name:s,index:"head-".concat(e)})))}),mounted(){console.log("curResult",this.curResult)},updated(){console.log("curResult",this.curResult)},methods:{survivalMinutes:(s=0)=>isNaN(s)?0:(s/60).toFixed(1),isMineResult(s){return this.myUid===s},mShowNick(s){const e=s.nick||"";return this.isShowRTX&&s.wxwork_eng_name||e}}},[["render",function(s,i,p,d,c,m){return t(),e("div",{class:"press-data"},[l("div",{class:"press-data__head myResult"},[(t(!0),e(r,null,u(c.headList,(s=>(t(),e("p",{key:s.index,class:"press-data__head-cell"},a(s.name),1)))),128))]),l("div",{class:"press-data__content"},[p.myResult?(t(),e("div",{key:0,class:"press-data__mine"},[l("p",null,a(m.mShowNick(p.myResult.user_result_list[0])),1),l("p",null,a(p.myResult.user_result_list[0].elimination||0),1),l("p",null,a(p.myResult.user_result_list[0].assist||0),1),l("p",null,a((p.myResult.user_result_list[0].harm||0)/100),1),l("p",null,a(m.survivalMinutes(p.myResult.user_result_list[0].survival)),1),l("p",null,a((p.myResult.user_result_list[0].cure||0)/100),1),l("p",null,a(p.myResult.user_result_list[0].rescue||0),1),l("p",null,a(p.myResult.user_result_list[0].score||0),1)])):o("",!0),l("div",{class:"press-data__box"},[(t(!0),e(r,null,u(p.curResult.team_result_list,(s=>(t(),e("div",{key:s.user_result_list[0].uid,class:n({"press-data__item":!0,"press-data__item--active":m.isMineResult(s.user_result_list[0].uid)})},[l("p",null,a(m.mShowNick(s.user_result_list[0])),1),l("p",null,a(s.user_result_list[0].elimination||0),1),l("p",null,a(s.user_result_list[0].assist||0),1),l("p",null,a((s.user_result_list[0].harm||0)/100),1),l("p",null,a(m.survivalMinutes(s.user_result_list[0].survival)),1),l("p",null,a((s.user_result_list[0].cure||0)/100),1),l("p",null,a(s.user_result_list[0].rescue||0),1),l("p",null,a(s.user_result_list[0].score||0),1)],2)))),128))])])])}],["__scopeId","data-v-22d5d15f"]]);const O=s({props:{myTeamResult:{type:Object,default:()=>({})}},methods:{clickHeader(){this.$emit("clickHeader")}}},[["render",function(s,r,u,o,n,p){return t(),e("div",{class:"press-data press-data--fixed",onClick:r[0]||(r[0]=i(((...s)=>p.clickHeader&&p.clickHeader(...s)),["stop"]))},[l("div",{class:"press-data__top"},[l("p",{class:"p"},a(u.myTeamResult.team_name),1),l("p",{class:"p"},[l("span",null,a(u.myTeamResult.score||0),1),l("i",{class:"i"},"分")]),l("p",{class:"p"},[l("i",{class:"i"},"第"),l("span",null,a(u.myTeamResult.rank||"-"),1),l("i",{class:"i"},"名")])])])}],["__scopeId","data-v-728a820a"]]);const S=s({props:{teamResult:{type:Object,default:()=>({})},isMine:{type:Boolean,default:!1},isShowRTX:{type:Boolean,default:!1},myUid:{type:String,default:""}},data:()=>({result:{isOpen:!0}}),watch:{teamResult:{handler(s){this.result={isOpen:!1,...s}},immediate:!0,deep:!0}},methods:{toggleOpen(){this.result.isOpen=!this.result.isOpen},openText:s=>s.isOpen?"收起":"详情",isMineResult(s){return this.myUid===s},survivalMinutes:(s=0)=>isNaN(s)?0:(s/60).toFixed(1),mShowNick(s){const e=s.nick||"";return this.isShowRTX&&s.wxwork_eng_name||e}}},[["render",function(s,p,d,c,m,_){return t(),e("div",{class:"press-data"},[l("div",{class:n(["press-data__top",[d.isMine?"press-data__top--highlight myResult":"press-data__top--normal",{"press-data__top--open":m.result.isOpen}]]),onClick:p[0]||(p[0]=i(((...s)=>_.toggleOpen&&_.toggleOpen(...s)),["stop"]))},[l("p",{class:"p"},a(d.teamResult.team_name),1),l("p",{class:"p"},[l("span",{class:"span"},a(d.teamResult.score||0),1),l("i",{class:"i"},"分")]),l("p",{class:"p"},[l("i",{class:"i"},"第"),l("span",{class:"span"},a(d.teamResult.rank||"-"),1),l("i",{class:"i"},"名")])],2),m.result.isOpen?(t(),e("div",{key:0,class:"press-data__detail-head"},[l("p",{class:"p"}," 玩家名称 "),l("p",{class:"p"}," 淘汰 "),l("p",{class:"p"}," 助攻 "),l("p",{class:"p"}," 伤害 "),l("p",{class:"p"}," 时间(分) "),l("p",{class:"p"}," 治疗量 "),l("p",{class:"p"}," 救援 ")])):o("",!0),l("div",{class:"press-data__detail-content"},[l("div",{class:"press-data__box"},[m.result.isOpen?(t(!0),e(r,{key:0},u(d.teamResult.user_result_list,(s=>(t(),e("div",{key:s.uid,class:n({"press-data__item":!0,"press-data__item--highlight":_.isMineResult(s.uid)})},[l("p",{class:"p"},a(_.mShowNick(s)),1),l("p",{class:"p"},a(s.elimination||0),1),l("p",{class:"p"},a(s.assist||0),1),l("p",{class:"p"},a((s.harm||0)/100),1),l("p",{class:"p"},a(_.survivalMinutes(s.survival)),1),l("p",{class:"p"},a((s.cure||0)/100),1),l("p",{class:"p"},a(s.rescue||0),1)],2)))),128)):o("",!0)])])])}],["__scopeId","data-v-f7e98c66"]]);const H=s({props:{myTotalTeamResult:{type:Object,default:()=>({})},isTeam:{type:Boolean,default:!0},isShowRTX:{type:Boolean,default:!1},hideHistoryList:{type:Boolean,default:!1}},computed:{showNick(){const{myTotalTeamResult:s}=this,e=s.nike||"";return!this.isShowRTX||this.isTeam?e:s.wxwork_eng_name||e}},methods:{clickHeader(){this.$emit("clickHeader")}}},[["render",function(s,r,u,n,d,c){return t(),e("div",{class:"press-data",onClick:r[0]||(r[0]=i((s=>c.clickHeader()),["stop"]))},[l("div",{class:"press-data__head"},[l("p",{class:"press-data__head-item"}," 名次 "),l("p",{class:"press-data__head-item"},a(u.isTeam?"队伍":"玩家")+"名称 ",1),u.hideHistoryList?o("",!0):(t(),e("p",{key:0,class:"press-data__head-item"}," 历史场次积分 ")),l("p",{class:"press-data__head-item"}," 总积分 ")]),l("div",{class:"press-data__item"},[l("p",{class:"press-data__cell press-data__cell--number"},[l("span",{class:"press-data__cell-inner"},a(u.myTotalTeamResult.rank),1)]),l("p",{class:"press-data__cell"},a(c.showNick),1),u.hideHistoryList?o("",!0):(t(),e("p",{key:0,class:"press-data__cell"},a(u.myTotalTeamResult.scores),1)),l("p",{class:"press-data__cell press-data__cell--score"},[l("span",{class:"press-data__cell-inner"},a(u.myTotalTeamResult.totalScore),1),p("分 ")])])])}],["__scopeId","data-v-fbe03d64"]]);const M=s({props:{totalTeamOrPersonalList:{type:Array,default:()=>[]},myTotalTeamResult:{type:Object,default:()=>({})},isTeamMatch:{type:Boolean,default:!1},isShowRTX:{type:Boolean,default:!1},hideHistoryList:{type:Boolean,default:!1}},data:()=>({hasPullUp:!1}),computed:{allList(){const{myTotalTeamResult:s,totalTeamOrPersonalList:e}=this;if(s&&Object.keys(s).length){const t=[{...s,isMine:!0},...e];return this.hasPullUp||this.hideHistoryList||(t[0].isOpen=!0),t}return!(null==e?void 0:e[0])||this.hasPullUp||this.hideHistoryList||(e[0].isOpen=!0),e}},mounted(){},methods:{onOpenItem(s){if(this.hideHistoryList)return;this.hasPullUp=!0;const e=s.isOpen;this.$set(s,"isOpen",!e),this.$forceUpdate()},mShowNick(s){const e=s.nike||s.team_name||"";return!this.isShowRTX||this.isTeamMatch?e:s.wxwork_eng_name||e}}},[["render",function(s,i,m,_,h,y){return t(),e("div",{class:"press-list"},[l("div",{class:"press-list__head"},[l("p",{class:"press-list__head-cell"}," 名次 "),l("p",{class:"press-list__head-cell"},a(m.isTeamMatch?"队伍":"玩家")+"名称 ",1),m.hideHistoryList?o("",!0):(t(),e("p",{key:0,class:"press-list__head-cell"}," 历史场次积分 ")),l("p",{class:"press-list__head-cell"}," 总积分 ")]),l("div",{class:"press-list__data"},[(t(!0),e(r,null,u(y.allList,((s,i)=>(t(),e("div",{key:i,class:n(["press-list__box",{"press-list__box--open":s.isOpen}])},[l("div",{class:n(["press-list__rank-item",s.isMine?"press-list__rank-item--highlight  myResult":""]),onClick:e=>y.onOpenItem(s)},[l("p",{class:"press-list__rank-cell press-list__rank-cell--number"},[l("span",{class:n(["press-list__rank-text",{"press-list__rank-text--no-1":1==s.rank,"press-list__rank-text--no-2":2==s.rank,"press-list__rank-text--no-3":3==s.rank}])},a(s.rank),3)]),l("p",{class:"press-list__rank-cell"},a(y.mShowNick(s)),1),m.hideHistoryList?o("",!0):(t(),e("p",{key:0,class:"press-list__rank-cell"},a(s.scores),1)),l("p",{class:"press-list__rank-cell press-list__rank-cell--score"},[l("span",{class:"press-list__rank-text"},a(s.totalScore),1),p("分 ")])],10,["onClick"]),d(l("div",{class:"press-list__detail"},[l("div",{class:"press-list__detail-head"},[l("p",{class:"press-list__detail-head-cell"}," 历史场次 "),l("p",{class:"press-list__detail-head-cell"}," 排名 "),l("p",{class:"press-list__detail-head-cell"}," 积分 ")]),l("div",{class:"press-list__detail-content"},[l("div",{class:"press-list__detail-box"},[(t(!0),e(r,null,u(s.battle_list,((s,i)=>(t(),e("div",{key:i,class:"press-list__detail-item"},[l("p",{class:"press-list__detail-cell"}," 第"+a(s.seq)+"场 ",1),l("p",{class:"press-list__detail-cell"},a(s.rank),1),l("p",{class:"press-list__detail-cell"},a(s.score),1)])))),128))])])],512),[[c,s.isOpen]])],2)))),128))])])}],["__scopeId","data-v-7624fef8"]]),C=s(m({__name:"press-gp-data",props:{myTeamResult:{default:()=>({})},myTotalTeamResult:{default:()=>({})},totalTeamOrPersonalList:{default:()=>[]},myPersonalResult:{default:()=>({})},tabs:{default:()=>[]},curResult:{default:()=>({team_result_list:[]})},curTab:{default:""},isEnd:{type:Boolean,default:!1},isTeamMatch:{type:Boolean,default:!0},isShowRTX:{type:Boolean,default:!1},totalFinished:{type:Boolean,default:!1},totalLoading:{type:Boolean,default:!1},myUid:{default:""},hideHistoryList:{type:Boolean,default:!1}},emits:["changeTab","clickHeader","loadMoreTotal","update:totalLoading"],setup(s,{emit:i}){const p=s,d=i,c=_((()=>!(!p.myTeamResult||!Object.keys(p.myTeamResult).length))),m=h(!1),g=()=>{const s=document.querySelector(".myResult")||document.querySelector(".myResult");if(!s)return void(m.value=!1);if("function"==typeof s.getBoundingClientRect&&s.getBoundingClientRect()){const{top:e}=s.getBoundingClientRect()||{};return void(m.value=e<=0)}const e=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset;m.value=s.offsetTop<e};y((()=>{window.addEventListener("scroll",g,!0)})),v((()=>{window.removeEventListener("scroll",g)}));const C=_({get:()=>p.totalLoading,set(s){d("update:totalLoading",s)}}),B=s=>{d("changeTab",s)},X=()=>{d("clickHeader")},N=()=>{d("loadMoreTotal")};return(s,i)=>(t(),e("div",{class:"press-gp-data"},[s.isTeamMatch?(t(),e("div",{key:0,class:"press-gp-data__wrap"},[m.value&&c.value&&"all"===s.curTab?(t(),T(H,{key:0,"is-team":!0,"my-total-team-result":s.myTotalTeamResult,"is-show-r-t-x":s.isShowRTX,"hide-history-list":s.hideHistoryList,onClickHeader:X},null,8,["my-total-team-result","is-show-r-t-x","hide-history-list"])):m.value&&c.value&&"all"!==s.curTab?(t(),T(O,{key:1,"my-team-result":s.myTeamResult,onClickHeader:X},null,8,["my-team-result"])):o("",!0),l("div",{class:"press-gp-data__tabs"},[s.isEnd?(t(),e("a",{key:0,class:n(["press-gp-data__tab",{"press-gp-data__tab--active":"all"===s.curTab}]),onClick:i[0]||(i[0]=s=>B({name:"all"}))}," 总排名 ",2)):o("",!0),(t(!0),e(r,null,u(s.tabs,(l=>(t(),e("a",{key:l.key||l.name,class:n(["press-gp-data__tab",{"press-gp-data__tab--active":s.curTab===l.name}]),onClick:s=>B(l)},a(l.name),11,["onClick"])))),128))]),"all"===s.curTab&&s.totalTeamOrPersonalList&&s.totalTeamOrPersonalList.length?(t(),e("div",{key:2,class:"press-gp-data__list-wrap"},[R(w,{modelValue:C.value,"onUpdate:modelValue":i[1]||(i[1]=s=>C.value=s),finished:s.totalFinished,onLoad:N},{default:f((()=>[R(M,{"my-total-team-result":s.myTotalTeamResult,"total-team-or-personal-list":s.totalTeamOrPersonalList,"is-show-r-t-x":s.isShowRTX,"is-team-match":s.isTeamMatch,"hide-history-list":s.hideHistoryList},null,8,["my-total-team-result","total-team-or-personal-list","is-show-r-t-x","is-team-match","hide-history-list"])])),_:1},8,["modelValue","finished"])])):"all"!==s.curTab&&s.curResult&&s.curResult.team_result_list?(t(),e("div",{key:3,class:"press-gp-data__list-wrap"},[c.value?(t(),T(S,{key:0,"team-result":s.myTeamResult,"is-show-r-t-x":s.isShowRTX,"is-mine":!0,"my-uid":s.myUid},null,8,["team-result","is-show-r-t-x","my-uid"])):o("",!0),(t(!0),e(r,null,u(s.curResult.team_result_list,((e,l)=>(t(),T(S,{key:l,"is-show-r-t-x":s.isShowRTX,"team-result":e,"my-uid":s.myUid},null,8,["is-show-r-t-x","team-result","my-uid"])))),128))])):(t(),T(b,{key:4}))])):(t(),e("div",{key:1,class:"press-gp-data__wrap"},[l("div",{class:"press-gp-data__tabs"},[s.isEnd?(t(),e("a",{key:0,class:n(["press-gp-data__tab",{"press-gp-data__tab--active":"all"===s.curTab}]),onClick:i[2]||(i[2]=s=>B({name:"all"}))}," 总排名 ",2)):o("",!0),(t(!0),e(r,null,u(s.tabs,(l=>(t(),e("a",{key:l.key||l.name,class:n(["press-gp-data__tab",{"press-gp-data__tab--active":s.curTab===l.name}]),onClick:s=>B(l)},a(l.name),11,["onClick"])))),128))]),"all"===s.curTab&&s.totalTeamOrPersonalList&&s.totalTeamOrPersonalList.length?(t(),e("div",{key:0,class:"press-gp-data__list-wrap"},[m.value&&s.myTotalTeamResult&&"all"===s.curTab?(t(),T(H,{key:0,"is-team":!1,"my-total-team-result":s.myTotalTeamResult,"is-show-r-t-x":s.isShowRTX,"hide-history-list":s.hideHistoryList,onClickHeader:i[3]||(i[3]=s=>X())},null,8,["my-total-team-result","is-show-r-t-x","hide-history-list"])):o("",!0),R(w,{modelValue:C.value,"onUpdate:modelValue":i[4]||(i[4]=s=>C.value=s),finished:s.totalFinished,onLoad:N},{default:f((()=>[R(M,{"my-total-team-result":s.myTotalTeamResult,"total-team-or-personal-list":s.totalTeamOrPersonalList,"is-show-r-t-x":s.isShowRTX,"is-team-match":s.isTeamMatch,"hide-history-list":s.hideHistoryList},null,8,["my-total-team-result","total-team-or-personal-list","is-show-r-t-x","is-team-match","hide-history-list"])])),_:1},8,["modelValue","finished"])])):"all"!==s.curTab&&s.curResult&&s.curResult.team_result_list?(t(),e("div",{key:1,class:"press-gp-data__list-wrap"},[m.value&&s.myPersonalResult&&"all"!==s.curTab?(t(),T(x,{key:0,"my-result":s.myPersonalResult,"is-show-r-t-x":s.isShowRTX,onClickHeader:X},null,8,["my-result","is-show-r-t-x"])):o("",!0),R(L,{"my-result":s.myPersonalResult,"is-show-r-t-x":s.isShowRTX,"cur-result":s.curResult,"my-uid":s.myUid},null,8,["my-result","is-show-r-t-x","cur-result","my-uid"])])):(t(),T(b,{key:2}))])),k(s.$slots,"default",{},void 0,!0)]))}}),[["__scopeId","data-v-5a1c162f"]]),B=s(m({__name:"gp-data",setup(s){const l=h("all"),a=h(Array.from({length:10}).map(((s,e)=>({name:"第".concat(g[e+1],"局"),seq:e+1})))),i=h(!1),r=s=>{l.value=s.name,1===s.seq&&(i.value=!i.value),2===s.seq&&(p.value=p.value.length?[]:n(0))},u=(s=0)=>({nick:"玩家名称玩家名称玩家名称玩家名称玩家名称",assist:s+1,harm:2,cure:3,user_result_list:[{nick:"玩家名称玩家名称玩家名称玩家名称玩家名称"}]}),o=h({team_result_list:Array.from({length:15}).map(((s,e)=>({team_name:"队伍名称队伍名称队伍名称队伍名称队伍名称",score:11,rank:e+1,user_result_list:Array.from({length:4}).map(((s,e)=>u(e)))})))}),n=(s=0)=>Array.from({length:15}).map(((e,t)=>({rank:t+1+s,nick:"名称名称名称名称名称名称名称名称名称名称名称",team_name:"名称名称名称名称名称名称名称名称名称名称名称",scores:"1/1/1/1/1",totalScore:"123",battle_list:Array.from({length:5}).map(((s,e)=>({seq:e+1,rank:e+1,score:e+1})))}))),p=h(n(0)),d=h(!1),c=h(!1),m=h(u(0)),_=()=>{setTimeout((()=>{p.value=p.value.concat(n(p.value.length)),p.value.length>100&&(d.value=!1),c.value=!1}),1e3)},y=s=>{c.value=s};return(s,u)=>(t(),e("div",{class:"demo-wrap"},[R(C,{tabs:a.value,"cur-tab":l.value,"is-end":!0,"is-team-match":i.value,"cur-result":o.value,"my-personal-result":m.value,"total-team-or-personal-list":p.value,"total-finished":d.value,"total-loading":c.value,onChangeTab:r,onLoadMoreTotal:_,"onUpdate:totalLoading":y},null,8,["tabs","cur-tab","is-team-match","cur-result","my-personal-result","total-team-or-personal-list","total-finished","total-loading"])]))}}),[["__scopeId","data-v-59f48a9e"]]);export{B as default};
