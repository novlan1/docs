import{af as e,_ as t,L as s,ao as i,M as o,ae as n,c as a,J as r,d as c,a as l,n as p,i as d,r as m,o as u,h,b as f,F as _,l as g,w as v,e as y,j as C,aH as k,ap as w,aI as b,aJ as P,aK as x,ag as z,aL as I,aM as T,f as M,m as R,K as L,D as S,E as A}from"./index-DdqTp3oi.js";import{G as O}from"./press-gp-popup-container-v2.BVMr8ctY.js";import{P as N}from"./press-switch.LbyQ9vLk.js";import{n as $}from"./object.Dyk2TGJi.js";import{P as B}from"./press-picker-plus.BjnQBL0j.js";import{N as j}from"./number.2DP956Ms.js";const F={BASE:"base",QUICK:"quick",KNOCK_OUT:"knockOut",MATCH_SCORE:"matchScore"},G=[{name:"积分赛",inCommonUse:!0,purpleTag:"常用赛制",description:"累计N局积分排名，适合正式赛事",key:F.BASE},{name:"快速赛",greenTag:"新手推荐",description:"极简流程，进房即可参赛，适合快速比赛",key:F.QUICK},{name:"单败淘汰赛",description:"系统分配对手，打出冠军，适合1V1模式的正式赛事",key:F.KNOCK_OUT},{name:"匹配积分赛",description:"随机匹配对手获胜累计积分排名，适合线上自动比赛",key:F.MATCH_SCORE}],U=G.slice(0,2),D=[{title:"极速对决",description:"落地刚枪，畅快对战"},{title:"经典模式",description:"经典战场对战，适合多人比赛",hot:!0},{title:"绿洲模式",description:"娱乐玩法，全新赛事体验",hot:!0},{title:"歼灭模式",description:"攻守对抗，精英战场"},{title:"空降奇兵",description:"空降战场，极速复活"},{title:"电竞模式",description:"战场竞技，刺激对决"},{title:"创意工坊",description:"创意玩法，无限可能"}],V=[{name:"冠军"},{name:"亚军"},{name:"季军"},{name:"参赛奖"},{name:"报名奖"}],E="https://image-1251917893.file.myqcloud.com/igame/match/gp/horz-match/prize.png";const H={rootStyle:function(t){return e({"background-color":t.plain?"":t.color,color:t.textColor||t.plain?t.textColor||t.color:""})}};const J=t({name:"PressTag",options:{...o,styleIsolation:"shared"},components:{PressIconPlus:i},props:{size:{type:String,default:""},mark:Boolean,color:{type:String,default:""},plain:Boolean,round:Boolean,textColor:{type:String,default:""},type:{type:String,default:"default"},closeable:Boolean,...s},computed:{tagClass(){const{type:e,size:t,mark:s,plain:i,round:o,customClass:a}=this;return"".concat(a," ").concat(n.bem2("tag",[e,t,{mark:s,plain:i,round:o}]))},tagStyle(){const{plain:e,color:t,textColor:s}=this;return H.rootStyle({plain:e,color:t,textColor:s})}},methods:{onClose(){this.$emit("close")}}},[["render",function(e,t,s,i,o,n){const h=m("PressIconPlus");return u(),a("div",{class:d(n.tagClass),style:p(n.tagStyle)},[r(e.$slots,"default",{},void 0,!0),s.closeable?(u(),c(h,{key:0,name:"cross","custom-class":"press-tag__close",onClick:n.onClose},null,8,["onClick"])):l("",!0)],6)}],["__scopeId","data-v-3501f3e0"]]);const q=t({name:"PressGpPopupCompetitionFormat",components:{GpMatchPopupContainer:O,PressTag:J},props:{current:{type:Number,default:0},systemList:{type:Array,default:()=>[]},show:{type:Boolean,default:!1}},data(){return{innerCurrent:this.current}},computed:{},watch:{current:{handler(e){this.innerCurrent=e},immediate:!0}},created(){},mounted(){},methods:{onSelectMatchMode(e,t){this.innerCurrent=t,this.$emit("selectMode",e,t)},onCancel(){this.$emit("cancel")},clickConfirm(){this.$emit("confirm",this.innerCurrent)}}},[["render",function(e,t,s,i,o,n){const r=m("PressTag"),p=m("GpMatchPopupContainer");return u(),c(p,{show:s.show,"is-showpopup-close":!0,"popup-title":"设置比赛赛制",onOnCancel:n.onCancel},{titleRight:h((()=>[f("div",{class:"press-format__confirm",onClick:t[0]||(t[0]=v(((...e)=>n.clickConfirm&&n.clickConfirm(...e)),["stop"]))}," 确定 ")])),content:h((()=>[f("div",{class:"press-format"},[(u(!0),a(_,null,g(s.systemList,((e,t)=>(u(),a("div",{key:e.name,class:"press-format__item",onClick:v((s=>n.onSelectMatchMode(e,t)),["stop"])},[f("div",{class:"press-format__content"},[f("div",{class:"press-format__name-wrap"},[f("div",{class:"press-format__name"},y(e.name),1),e.purpleTag?(u(),c(r,{key:0,"text-color":"rgba(83, 0, 195, 0.75)",color:"rgba(83, 0, 195, 0.10)"},{default:h((()=>[C(y(e.purpleTag),1)])),_:2},1024)):e.greenTag?(u(),c(r,{key:1,"text-color":"#009652",color:"rgba(0, 168, 112, 0.10)"},{default:h((()=>[C(y(e.greenTag),1)])),_:2},1024)):l("",!0)]),f("div",{class:"press-format__desc"},y(e.description),1)]),f("div",{class:d(["press-format__checkbox",o.innerCurrent===t?"checked":""])},null,2)],8,["onClick"])))),128))])])),_:1},8,["show","onOnCancel"])}],["__scopeId","data-v-8ef35341"]]),K={props:{accept:{type:String,default:"image"},capture:{type:[String,Array],default:()=>["album","camera"]},compressed:{type:Boolean,default:!0},camera:{type:String,default:"back"},maxDuration:{type:Number,default:60},uploadIcon:{type:String,default:"photograph"},uploadIconColor:{type:String,default:"#D3D4D6"},useBeforeRead:{type:Boolean,default:!1},afterRead:{type:Function,default:null},beforeRead:{type:Function,default:null},previewFullImage:{type:Boolean,default:!0},maxCount:{type:[String,Number],default:52},disabled:{type:Boolean,default:!1},imageMode:{type:String,default:"aspectFill"},name:{type:String,default:"file"},sizeType:{type:Array,default:()=>["original","compressed"]},multiple:{type:Boolean,default:!1},deletable:{type:Boolean,default:!0},maxSize:{type:[String,Number],default:Number.MAX_VALUE},fileList:{type:Array,default:()=>[]},uploadText:{type:String,default:""},width:{type:[String,Number],default:80},height:{type:[String,Number],default:80},previewImage:{type:Boolean,default:!0},customStyle:{type:String,default:""}}},Q={watch:{accept:{immediate:!0,handler(e){"all"!==e&&"media"!==e||console.warn("只有微信小程序才支持把 accept 配置为 all、media 之一")}}}};function W(e){return"function"==typeof e}function X(e){return function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)&&W(e.then)&&W(e.catch)}function Y(e){const t=e.split("?")[0];return/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i.test(t)}const{hasOwnProperty:Z}=Object.prototype;function ee(e,t){return Z.call(e,t)}const te={};function se(e){for(const s in te)if(ee(te,s)){if(te[s]===e)return s}const t=(window.URL||window.webkitURL).createObjectURL(e);return te[t]=e,t}function ie(e){(window.URL||window.webkitURL).revokeObjectURL(e),delete te[e]}function oe(e,t){const s=[],i=e.target.files.length;for(let o=0;o<i;o++){const i=e.target.files[o];let n;Object.defineProperty(i,"path",{get:()=>(n=n||se(i),n)}),o<t&&s.push(i)}return s}const ne={image:{jpg:"jpeg",jpe:"jpeg",pbm:"x-portable-bitmap",pgm:"x-portable-graymap",pnm:"x-portable-anymap",ppm:"x-portable-pixmap",psd:"vnd.adobe.photoshop",pic:"x-pict",rgb:"x-rgb",svg:"svg+xml",svgz:"svg+xml",tif:"tiff",xif:"vnd.xiff",wbmp:"vnd.wap.wbmp",wdp:"vnd.ms-photo",xbm:"x-xbitmap",ico:"x-icon"},video:{"3g2":"3gpp2","3gp":"3gpp",avi:"x-msvideo",f4v:"x-f4v",flv:"x-flv",jpgm:"jpm",jpgv:"jpeg",m1v:"mpeg",m2v:"mpeg",mpe:"mpeg",mpg:"mpeg",mpg4:"mpeg",m4v:"x-m4v",mkv:"x-matroska",mov:"quicktime",qt:"quicktime",movie:"x-sgi-movie",mp4v:"mp4",ogv:"ogg",smv:"x-smv",wm:"x-ms-wm",wmv:"x-ms-wmv",wmx:"x-ms-wmx",wvx:"x-ms-wvx"}};function ae({count:e,sourceType:t,type:s,extension:i=["*"]}){const o=document.createElement("input");return o.type="file",k(o,{position:"absolute",visibility:"hidden","z-index":-999,width:0,height:0,top:0,left:0}),o.accept=i.map((e=>{if("*"!==s){const t=e.replace(".","");return"".concat(s,"/").concat(ne[s][t]||t)}return function(){const e=window.navigator.userAgent.toLowerCase();return!(!e.match(/MicroMessenger/i)||"micromessenger"!==e.match(/MicroMessenger/i)[0])}()?".":0===e.indexOf(".")?e:".".concat(e)})).join(","),e>1&&(o.multiple="multiple"),1===t.length&&"camera"===t[0]&&(o.capture="camera"),o}let re=null;let ce=null;let le=null;function pe({count:e,success:t,fail:s,type:i}){if(w())return function({count:e,sourceType:t,type:s,extension:i,success:o}){re&&(document.body.removeChild(re),re=null),re=ae({count:e,sourceType:t,type:s,extension:i}),document.body.appendChild(re),re.addEventListener("change",(t=>{const s=oe(t,e);o({errMsg:"chooseFile:ok",get tempFilePaths(){return s.map((({path:e})=>e))},tempFiles:s})})),re.click()}({count:e,sourceType:[],type:i,extension:["*"],success:t});b({count:e,type:i,success:t,fail:s})}function de({count:e,sourceType:t,sizeType:s,success:i,fail:o}){if(w())return function({count:e,sourceType:t,extension:s,success:i}){ce&&(document.body.removeChild(ce),ce=null),ce=ae({count:e,sourceType:t,extension:s,type:"image"}),document.body.appendChild(ce),ce.addEventListener("change",(t=>{const s=oe(t,e);i({errMsg:"chooseImage:ok",get tempFilePaths(){return s.map((({path:e})=>e))},tempFiles:s})})),ce.click()}({count:e,sourceType:t,extension:["*"],success:i});x({count:e,sourceType:t,sizeType:s,success:i,fail:o})}function me({sourceType:e,success:t,fail:s,compressed:i,maxDuration:o,camera:n}){if(w())return function({sourceType:e,extension:t,success:s}){le&&(document.body.removeChild(le),le=null),le=ae({sourceType:e,extension:t,type:"video"}),document.body.appendChild(le),le.addEventListener("change",(e=>{const t=e.target.files[0],i={errMsg:"chooseVideo:ok",tempFile:t,size:t.size,duration:0,width:0,height:0,name:t.name};let o;Object.defineProperty(i,"tempFilePath",{get(){return o=o||se(this.tempFile),o}});const n=document.createElement("video");if(void 0!==n.onloadedmetadata){const e=se(t);n.onloadedmetadata=function(){ie(e),s(Object.assign(i,{duration:n.duration||0,width:n.videoWidth||0,height:n.videoHeight||0}))},setTimeout((()=>{n.onloadedmetadata=null,ie(e),s(i)}),300),n.src=e}else s(i)})),le.click()}({sourceType:e,extension:["*"],success:t});P({sourceType:e,success:t,fail:s,compressed:i,maxDuration:o,camera:n})}function ue(e){return e.tempFiles}const he=t({name:"PressUploader",options:{virtualHost:!0,styleIsolation:"shared"},components:{PressIconPlus:i,PressLoadingPlus:I},mixins:[Q,K],emits:["chooseFile","beforeRead","afterRead","oversize","clickPreview","delete","error"],data:()=>({lists:[],isInCount:!0,isNotInUni:w()}),watch:{fileList:{immediate:!0,handler(){this.formatFileList()}}},methods:{addUnit:z,formatFileList(){const{fileList:e=[],maxCount:t}=this,s=e.map((e=>{return Object.assign(Object.assign({},e),{isImage:"image"===this.accept||Y(e.url||e.thumb),isVideo:"video"===this.accept||(t=e.url||e.thumb,/\.(mp4|mpg|mpeg|dat|asf|avi|rm|rmvb|mov|wmv|flv|mkv|m3u8)/i.test(t)),deletable:"boolean"==typeof e.deletable?e.deletable:this.deletable});var t}));this.lists=s,this.isInCount=s.length<t},chooseFile(){const{maxCount:e,multiple:t,lists:s,disabled:i}=this;if(this.$emit("chooseFile",i),i)return;let o;try{o=Array.isArray(this.capture)?this.capture:this.capture.split(",")}catch(n){o=[]}(function({accept:e,multiple:t,capture:s,compressed:i,maxDuration:o,sizeType:n,camera:a,maxCount:r}){return new Promise(((c,l)=>{switch(e){case"image":de({count:t?Math.min(r,9):1,sourceType:s,sizeType:n,success:e=>c(function(e){return e.tempFiles}(e)),fail:l});break;case"video":me({sourceType:s,compressed:i,maxDuration:o,camera:a,success:e=>c(e),fail:l});break;case"file":pe({count:t?r:1,type:e,success:e=>c(ue(e)),fail:l});break;default:pe({count:t?r:1,type:"all",success:e=>c(ue(e)),fail:l})}}))})(Object.assign({accept:this.accept,multiple:this.multiple,capture:o,compressed:this.compressed,maxDuration:this.maxDuration,sizeType:this.sizeType,camera:this.camera},{maxCount:e-s.length})).then((e=>{this.onBeforeRead(t?e:e[0])})).catch((e=>{this.$emit("error",e)}))},onBeforeRead(e){const{beforeRead:t,useBeforeRead:s}=this;let i=!0;W(t)&&(i=t(e,this.getDetail())),s&&(i=new Promise(((t,s)=>{this.$emit("beforeRead",Object.assign(Object.assign({file:e},this.getDetail()),{callback:e=>{e?t():s()}}))}))),i&&(X(i)?i.then((t=>this.onAfterRead(t||e))):this.onAfterRead(e))},getDetail(e){return{name:this.name,index:null==e?this.fileList.length:e}},onAfterRead(e){const{maxSize:t,afterRead:s}=this;(Array.isArray(e)?e.some((e=>e.size>t)):e.size>t)?this.$emit("oversize",Object.assign({file:e},this.getDetail())):("function"==typeof s&&s(e,this.getDetail()),this.$emit("afterRead",Object.assign({file:e},this.getDetail())))},deleteItem(e){this.$emit("delete",Object.assign(Object.assign({},this.getDetail(e)),{file:this.fileList[e]}))},onPreviewImage(e){e.isImage&&this.previewFullImage&&T({urls:this.lists.filter((e=>"image"===this.accept||Y(e.url||e.thumb))).map((e=>e.url||e.thumb)),current:e.url||e.thumb,fail(){}})},onPreviewVideo(e){if(!this.data.previewFullImage)return;const{index:t}=e.currentTarget.dataset,{lists:s}=this.data;wx.previewMedia({sources:s.map((e=>Object.assign(Object.assign({},e),{type:"video"}))),current:t,fail(){}})},onClickPreview(e){const{index:t}=e.currentTarget.dataset,s=this.data.lists[t];this.$emit("clickPreview",Object.assign(Object.assign({},s),this.getDetail(t)))}}},[["render",function(e,t,s,i,o,n){const h=R,C=m("PressIconPlus"),k=m("PressLoadingPlus");return u(),a("div",{class:"press-upload",style:p(e.customStyle)},[f("div",{class:"press-upload__wrap"},[e.previewImage?(u(!0),a(_,{key:0},g(o.lists,((t,s)=>(u(),a("div",{key:s,class:"press-upload__wrap__preview"},[t.isImage||t.type&&"image"===t.type?(u(),a(_,{key:0},[o.isNotInUni?(u(),a("img",{key:0,src:t.thumb||t.url,mode:e.imageMode,class:"press-upload__wrap__preview__image",style:p([{width:n.addUnit(e.width),height:n.addUnit(e.height)}]),onClick:e=>n.onPreviewImage(t)},null,12,["src","mode","onClick"])):(u(),c(h,{key:1,src:t.thumb||t.url,mode:e.imageMode,class:"press-upload__wrap__preview__image",style:p([{width:n.addUnit(e.width),height:n.addUnit(e.height)}]),onClick:e=>n.onPreviewImage(t)},null,8,["src","mode","style","onClick"]))],64)):(u(),a("div",{key:1,class:"press-upload__wrap__preview__other"},[M(C,{color:"#80CBF9",size:"26",name:t.isVideo||t.type&&"video"===t.type?"movie":"folder"},null,8,["name"]),f("span",{class:"press-upload__wrap__preview__other__text"},y(t.isVideo||t.type&&"video"===t.type?"视频":"文件"),1)])),"uploading"===t.status||"failed"===t.status?(u(),a("div",{key:2,class:"press-upload__status"},[f("div",{class:"press-upload__status__icon"},["failed"===t.status?(u(),c(C,{key:0,name:"close",color:"#ffffff",size:"22"})):(u(),c(k,{key:1,size:"22",mode:"circle",color:"#ffffff"}))]),t.message?(u(),a("span",{key:0,class:"press-upload__status__message"},y(t.message),1)):l("",!0)])):l("",!0),"uploading"!==t.status&&(e.deletable||t.deletable)?(u(),a("div",{key:3,class:"press-upload__deletable",onClick:v((e=>n.deleteItem(s)),["stop"])},[M(C,{name:"cross",color:"#ffffff",size:"16","custom-class":"press-upload__deletable__icon"})],8,["onClick"])):l("",!0),(t.status,l("",!0))])))),128)):l("",!0),o.isInCount?(u(),a(_,{key:1},[e.$slots.default||e.$slots.$default?(u(),a("div",{key:0,onClick:t[0]||(t[0]=(...e)=>n.chooseFile&&n.chooseFile(...e))},[r(e.$slots,"default",{},void 0,!0)])):(u(),a("div",{key:1,class:d(["press-upload__button",[e.disabled&&"press-upload__button--disabled"]]),"hover-class":e.disabled?"":"press-upload__button--hover","hover-stay-time":"150",style:p([{width:n.addUnit(e.width),height:n.addUnit(e.height)}]),onClick:t[1]||(t[1]=v(((...e)=>n.chooseFile&&n.chooseFile(...e)),["stop"]))},[M(C,{name:e.uploadIcon,size:"26",color:e.uploadIconColor,onClick:n.chooseFile},null,8,["name","color","onClick"]),e.uploadText?(u(),a("span",{key:0,class:"press-upload__button__text"},y(e.uploadText),1)):l("",!0)],14,["hover-class"]))],64)):l("",!0)])],4)}],["__scopeId","data-v-3c676d5e"]]),fe=[{name:"手动发奖",isVHtml:!1,desc:"比赛结束后，办赛者自行选择获奖玩家发奖",id:0},{name:"自动按名次发奖",isVHtml:!0,desc:'比赛结束后，系统按照<span class="press_light">1-3名</span>发奖，<span class="press_light" onClick="btnClick">修改名次></span>',id:14},{name:"冠军奖",isVHtml:!1,desc:"描述文案产品提供",id:1},{name:"亚军奖",isVHtml:!1,desc:"描述文案产品提供",id:2},{name:"季军奖",isVHtml:!1,desc:"描述文案产品提供",id:3},{name:"报名奖",isVHtml:!1,desc:"描述文案产品提供",id:4},{name:"参赛奖",isVHtml:!1,desc:"描述文案产品提供",id:5}];const _e=t({name:"PressGpPopupEditPrize",components:{GpMatchPopupContainer:O,EditPrizeItem:t({name:"EditPrizesItem",components:{PressSwitch:N,PressUploader:he},options:{styleIsolation:"shared"},props:{isPopupMode:{type:Boolean,default:!0},isChangeHeight:{type:Boolean,default:!1},isCreateGame:{type:Boolean,default:!1},editPrizeType:{type:Number,default:1},awardInfo:{type:Object,default:()=>{}},uploadFile:{type:Function,default:()=>Promise.resolve("")},isPay:{type:Boolean,default:!1},adjustPosition:{type:Boolean,default:!1}},data:()=>({isShowPopup:!0,checked:!1,itemNum:1,isLargeHeight:!1,TypeNumList:[{name:"每人",id:2},{name:"总共",id:1}],tabIndex:0,defaultPrize:"https://image-1251917893.file.myqcloud.com/igame/match/gp/horz-match/prize.png",prizeData:{}}),computed:{isAutoEdit(){return 1===this.firstPrizeItem.itemType},rewardTypeText(){const{rewardType:e}=this.prizeData,t=fe.find((t=>t.id===e));return(null==t?void 0:t.name)||"未设置"},firstPrizeItem(){var e,t;return(null==(t=null==(e=this.prizeData)?void 0:e.itemList)?void 0:t[0])||{}}},watch:{awardInfo:{handler(e){try{this.prizeData=JSON.parse(JSON.stringify(e||{}))}catch(t){}},immediate:!0,deep:!0}},mounted(){},methods:{clickClose(){this.$emit("close")},onSub(){let e=this.firstPrizeItem.itemNum;1!=e&&(e=Number(e)-1,this.firstPrizeItem.itemNum=e,this.updatePrize())},onAdd(){let e=this.firstPrizeItem.itemNum;1e4!=e&&(e>=0&&(e=Number(e)+1,this.firstPrizeItem.itemNum=e),this.updatePrize())},onFocusInput(){},onBlurInput(){},onChange(e){this.prizeData.showCondition=e,this.updatePrize()},onTab(e){this.firstPrizeItem.itemNumType=e.id},onAwardCondition(){this.$emit("onAwardCondition",this.prizeData)},changePrize(){this.$emit("changePrize",this.prizeData)},uploadPrizeLogoPic(e){this.uploadFile(e.file).then((e=>{this.firstPrizeItem.itemPic=e.url,this.updatePrize()}))},updatePrize(){this.$emit("updatePrize",this.prizeData)},getPrice(e){var t;const{itemPrice:s=0,itemNum:i=0}=(null==(t=e.itemList)?void 0:t[0])||{};return(+i*s/100).toFixed(2)||0},numOnBlurInput(e){Number(e.detail.value)>1e4&&(this.firstPrizeItem.itemNum=1e4),Number(e.detail.value)<1&&(this.firstPrizeItem.itemNum=1),this.updatePrize()},onBlurInputTitle(e){this.prizeData.title=e.detail.value.slice(0,6),this.updatePrize()},onBlurInputText(e){this.firstPrizeItem.itemText=e.detail.value.slice(0,12),this.updatePrize()},changeHeightPopup(){}}},[["render",function(e,t,s,i,o,n){const r=L,c=m("PressUploader"),p=m("PressSwitch");return u(),a("div",{ref:"editPrizeRef",class:"press_edit-prizes-wrap"},[f("div",{class:d(["press_edit-prizes",[{"press_popup-edit-prizes-active":o.isLargeHeight&&s.isChangeHeight},{"press_create-game-wrap":s.isCreateGame}]])},[o.prizeData.itemList&&2===o.prizeData.itemList[0].itemType&&!o.prizeData.itemList[0].payStatus?(u(),a("div",{key:0,class:"press_tag-box"}," 未支付 ")):l("",!0),f("div",{class:d(["press_input-box",{"press_common-pr-wrap":s.isPopupMode}])},[f("div",{class:d(["press_label-box",{"press_label-box-pa-wrap":!s.isPopupMode}])},[f("div",{class:"press_prize-name"}," 奖项名称 "),f("div",{class:"press_common-input-wrap"},[M(r,{modelValue:o.prizeData.title,"onUpdate:modelValue":t[0]||(t[0]=e=>o.prizeData.title=e),class:d(["press_common-input",{"press_common-input-active":!s.isPopupMode}]),"adjust-position":s.adjustPosition,type:"text",placeholder:"请输入奖项名称",onFocus:n.onFocusInput,onBlur:t[1]||(t[1]=e=>n.onBlurInputTitle(e)),onInput:n.updatePrize},null,8,["modelValue","class","adjust-position","onFocus","onInput"])])],2),n.isAutoEdit?(u(),a("div",{key:0,class:d(["press_label-box",[{"press_edit-prize-info-pd":n.isAutoEdit},{"press_label-box-pa-wrap":!s.isPopupMode}]])},[f("div",{class:"press_prize-name"}," 奖品 "),f("div",{class:"press_common-input-wrap"},[M(r,{modelValue:n.firstPrizeItem.itemText,"onUpdate:modelValue":t[2]||(t[2]=e=>n.firstPrizeItem.itemText=e),class:d(["press_common-input",{"press_common-input-active":!s.isPopupMode}]),"adjust-position":s.adjustPosition,type:"text",placeholder:"请输入奖品名称",onFocus:n.onFocusInput,onBlur:t[3]||(t[3]=e=>n.onBlurInputText(e)),onInput:n.updatePrize},null,8,["modelValue","class","adjust-position","onFocus","onInput"])])],2)):l("",!0)],2),f("div",{class:d(["press_edit-prize-info",[{"press_edit-prize-info-pd":s.isPopupMode},{"press_auto-edit-prize-info-pd":!s.isPopupMode&&n.isAutoEdit}]])},[f("div",{class:"press_edit-prize-detail"},[n.isAutoEdit?l("",!0):(u(),a("div",{key:0,class:"press_prize-box"},[f("div",{class:"press_prize-name"}," 奖品 "),f("div",{class:"press_prize-text"},y(n.firstPrizeItem.itemText),1),f("div",{class:"iconfont icon-exchange",onClick:t[4]||(t[4]=v(((...e)=>n.changePrize&&n.changePrize(...e)),["stop"]))})])),f("div",{class:"press_prize-detail"},[M(c,{class:"press_prize-img-wrap","custom-style":"flex: none;",disabled:!n.isAutoEdit,onAfterRead:n.uploadPrizeLogoPic},{default:h((()=>[n.isAutoEdit?(u(),a("div",{key:0,class:"press_prize-edit-icon"})):l("",!0),f("img",{class:"press_prize-img",src:n.firstPrizeItem.itemPic||o.defaultPrize},null,8,["src"])])),_:1},8,["disabled","onAfterRead"]),f("div",{class:"press_prize-num-box"},[n.isAutoEdit?(u(),a("div",{key:0,class:"press_prize-num-type-box"},[f("div",{class:"press_normal-text"}," 数量类型： "),f("div",{class:"press_tab-box"},[(u(!0),a(_,null,g(o.TypeNumList,((e,t)=>(u(),a("div",{key:t,class:d(["press_tab",{"press_tab-on":e.id==n.firstPrizeItem.itemNumType}]),onClick:t=>n.onTab(e)},y(e.name),11,["onClick"])))),128))])])):l("",!0),f("div",{class:"press_prize-part-box"},[f("div",{class:"press_normal-text"}," 数量份额： "),f("div",{class:"press_change-score-box"},[f("div",{class:d(["press_score-sub-btn",{"press_score-btn-active":0==o.itemNum}]),onClick:t[5]||(t[5]=(...e)=>n.onSub&&n.onSub(...e))},null,2),M(r,{modelValue:n.firstPrizeItem.itemNum,"onUpdate:modelValue":t[6]||(t[6]=e=>n.firstPrizeItem.itemNum=e),class:"press_vert-input",type:"number",max:1e4,"adjust-position":s.adjustPosition,onBlur:t[7]||(t[7]=e=>n.numOnBlurInput(e)),onFocus:n.onFocusInput},null,8,["modelValue","adjust-position","onFocus"]),f("div",{class:"press_score-add-btn",onClick:t[8]||(t[8]=(...e)=>n.onAdd&&n.onAdd(...e))})])]),n.isAutoEdit?l("",!0):(u(),a("div",{key:1,class:"press_price-box"},[f("div",{class:"press_normal-text press_light-text"}," 金额： "),f("div",{class:"press_normal-text-wd press_light-text"}," ¥"+y(n.getPrice(o.prizeData)),1)]))])])])],2),f("div",{class:"press_switch-box"},[f("div",{class:"press_prize-name"}," 发奖条件 "),M(p,{checked:o.prizeData.showCondition,size:"24px","active-color":"#5300C3",onChange:n.onChange},null,8,["checked","onChange"])]),o.prizeData.showCondition?(u(),a("div",{key:1,class:"press_setting-box",onClick:t[9]||(t[9]=(...e)=>n.onAwardCondition&&n.onAwardCondition(...e))},[f("div",{class:"press_normal-text"},y(n.rewardTypeText),1),f("div",{class:"iconfont icon-back"})])):l("",!0)],2)],512)}],["__scopeId","data-v-c8eebf98"]])},options:{styleIsolation:"shared"},props:{isPopupMode:{type:Boolean,default:!1},show:{type:Boolean,default:!1},awardInfo:{type:Object,default:()=>({})},uploadFile:{type:Function,default:()=>()=>Promise.resolve("")}},data:()=>({isShowPopup:!0,checked:!1,scoreNum:0,isChangeHeight:!1,defaultAvatar:"https://image-1251917893.file.myqcloud.com/tip-project/pubg/pubg-match/teamate-default-avatar.png"}),computed:{},mounted(){},methods:{clickClose(){this.$emit("cancel")},onFocusInput(){console.log("获取焦点")},onBlurInput(){console.log("失去焦点")},onChange(e){this.checked=e},clickConfirm(){this.$emit("clickConfirm")},uploadPrize(){},onAwardCondition(){this.$emit("onAwardCondition")},updatePrize(e){this.$emit("updatePrize",e)},changePrize(e){this.$emit("changePrize",e)}}},[["render",function(e,t,s,i,o,n){const a=m("EditPrizeItem"),r=m("GpMatchPopupContainer");return u(),c(r,{show:s.show,"is-showpopup-close":!0,"popup-title":"编辑奖项",onOnCancel:n.clickClose},{titleRight:h((()=>[f("div",{class:"press-popup__confirm",onClick:t[0]||(t[0]=v(((...e)=>n.clickConfirm&&n.clickConfirm(...e)),["stop"]))}," 确定 ")])),content:h((()=>[f("div",{class:"press-edit-prize__content"},[M(a,{ref:"editPrizeItem","is-popup-mode":!1,"is-change-height":!0,"award-info":s.awardInfo,"upload-file":s.uploadFile,onOnAwardCondition:n.onAwardCondition,onChangePrize:n.changePrize,onUpdatePrize:n.updatePrize},null,8,["award-info","upload-file","onOnAwardCondition","onChangePrize","onUpdatePrize"])])])),_:1},8,["show","onOnCancel"])}],["__scopeId","data-v-39905b78"]]);const ge=t({name:"PressGpPopupMatchTime",options:{styleIsolation:"shared"},components:{GpMatchPopupContainer:O},props:{show:{type:Boolean,default:!1},timeStampFormat:{type:Function,default:()=>$},timeList:{type:Array,default:()=>[{title:"开始时间",innerTime:0},{title:"结束时间",innerTime:0}]}},data(){return{innerTimeList:JSON.parse(JSON.stringify(this.timeList))}},watch:{timeList:{handler(e){this.innerTimeList=JSON.parse(JSON.stringify(e))}}},methods:{onCancel(){this.$emit("cancel",!1)},clickConfirm(){this.$emit("confirm",this.innerTimeList)},showSetTime(e,t){this.$emit("clickSet",e,t,(e=>{this.innerTimeList[t].innerTime=parseInt(e/1e3,10)}))}}},[["render",function(e,t,s,i,o,n){const r=m("GpMatchPopupContainer");return u(),c(r,{show:s.show,"is-showpopup-close":!0,"popup-title":"比赛时间",onOnCancel:n.onCancel},{titleRight:h((()=>[f("div",{class:"press-popup__confirm",onClick:t[0]||(t[0]=v(((...e)=>n.clickConfirm&&n.clickConfirm(...e)),["stop"]))}," 确定 ")])),content:h((()=>[f("div",{class:"press-time"},[f("div",{class:"press-time__wrap"},[(u(!0),a(_,null,g(o.innerTimeList,((e,t)=>(u(),a("div",{key:t,class:"press-time__item",onClick:s=>n.showSetTime(e,t)},[f("div",{class:"press-time__box"},[f("div",{class:"press-time__title"},y(e.title),1),f("div",{class:"press-time__content"},[f("div",{class:"press-time__text"},[C(y(e.innerTime?s.timeStampFormat(e.innerTime,"M月dd日 hh:mm"):"")+" ",1),f("div",{class:"iconfont icon-triangle"})])])])],8,["onClick"])))),128))])])])),_:1},8,["show","onOnCancel"])}],["__scopeId","data-v-d265ae24"]]);const ve=t({name:"PressGpPopupPrizeInfo",options:{styleIsolation:"shared"},components:{GpMatchPopupContainer:O},props:{show:{type:Boolean,default:!1},tagList:{type:Array,default:()=>[]},value:{type:String,default:""},type:{type:String,default:""}},data:()=>({prizeName:""}),computed:{isTitle(){return"title"===this.type},placeholder(){return this.isTitle?"奖项名称限6字":"奖项内容限12字"}},watch:{value:{handler(e){this.prizeName=e},immediate:!0}},methods:{onCancel(){this.$emit("cancel",!1),this.prizeName=""},clickConfirm(){this.$emit("confirm",this.prizeName),this.prizeName=""},onSelectTag(e){this.prizeName=e.name}}},[["render",function(e,t,s,i,o,n){const r=L,p=m("GpMatchPopupContainer");return u(),c(p,{show:s.show,"is-showpopup-close":!0,"popup-title":n.isTitle?"奖项名称":"奖励内容",onOnCancel:n.onCancel},{titleRight:h((()=>[f("div",{class:"press-popup__confirm",onClick:t[0]||(t[0]=v(((...e)=>n.clickConfirm&&n.clickConfirm(...e)),["stop"]))}," 确定 ")])),content:h((()=>[f("div",{class:"press-prize"},[f("div",{class:"press-prize__wrap"},[f("div",{class:"press-prize__line"}),f("div",{class:"press-prize__input-wrap"},[M(r,{ref:"inputRef",modelValue:o.prizeName,"onUpdate:modelValue":t[1]||(t[1]=e=>o.prizeName=e),"auto-focus":!1,focus:!1,class:"press-prize__input",type:"text",maxlength:n.isTitle?6:12,placeholder:n.placeholder},null,8,["modelValue","maxlength","placeholder"])])]),n.isTitle?(u(),a("div",{key:0,class:"press-prize__tags"},[(u(!0),a(_,null,g(s.tagList,(e=>(u(),a("div",{key:e.name,class:"press-prize__tag",onClick:()=>n.onSelectTag(e)},y(e.name),9,["onClick"])))),128))])):l("",!0)])])),_:1},8,["show","popup-title","onOnCancel"])}],["__scopeId","data-v-e508d3ed"]]);const ye=t({name:"PressGpPopupQRCode",components:{GpMatchPopupContainer:O,PressUploader:he},props:{roundTimeList:{type:Array,default:()=>[]},show:{type:Boolean,default:!1},qRCode:{type:String,default:""},qRCodeUpdateTime:{type:String,default:""}},data:()=>({}),computed:{},watch:{roundTimeList:{handler(e){this.innerRoundTimeList=e}}},created(){},mounted(){},methods:{onCancel(){this.$emit("cancel"),this.$emit("update:show",!1)},clickConfirm(){this.$emit("confirm")},afterRead(e){this.$emit("afterRead",e)},deleteQRCode(){this.$emit("delete")}}},[["render",function(e,t,s,i,o,n){const r=m("PressUploader"),p=m("GpMatchPopupContainer");return u(),c(p,{show:s.show,"is-showpopup-close":!0,"popup-title":"比赛二维码群",onOnCancel:n.onCancel},{titleRight:h((()=>[f("div",{class:"press-popup__confirm",onClick:t[0]||(t[0]=v(((...e)=>n.clickConfirm&&n.clickConfirm(...e)),["stop"]))}," 确定 ")])),content:h((()=>[f("div",{class:"press-code"},[f("div",{class:"press-code__tip"},[f("p",null,"二维码将显示在比赛主页，方便选手扫码进群"),f("p",null,"通常有效期为7天，记得及时更新")]),f("div",{class:"press-code__main"},[s.qRCode?(u(),a("img",{key:0,src:s.qRCode,alt:"",srcset:""},null,8,["src"])):l("",!0)]),s.qRCode?(u(),a("div",{key:0,class:"press-code__time"}," 更新时间："+y(s.qRCodeUpdateTime),1)):l("",!0)]),f("div",{class:"press-code__buttons"},[f("div",{class:"press-code__button--secondary",onClick:t[1]||(t[1]=v(((...e)=>n.deleteQRCode&&n.deleteQRCode(...e)),["stop"]))}," 删除 "),M(r,{class:"press-upload-reupload",style:{flex:"0"},onAfterRead:n.afterRead},{default:h((()=>[f("div",{class:"press-code__button--primary"}," 重新上传 ")])),_:1},8,["onAfterRead"])])])),_:1},8,["show","onOnCancel"])}],["__scopeId","data-v-fb75c86e"]]);const Ce=t({name:"PressGpPopupSelectAwardCondition",components:{GpMatchPopupContainer:O},props:{show:{type:Boolean,default:!1},awardInfo:{type:Object,default:()=>({})}},data:()=>({tabIndex:0,checkId:0,oldId:0,tabList:[{name:"自定义发奖"},{name:"局内表现奖"}],chooseAwardList:[],autoAwardList:[{name:"手动发奖",isVHtml:!1,desc:"比赛结束后，办赛者自行选择获奖玩家发奖",id:0},{name:"自动按名次发奖",isVHtml:!0,desc:'比赛结束后，系统按照<span class="press_light">1-3名</span>发奖，<span class="press_light" onClick="btnClick">修改名次></span>',id:14}],awardList:[{name:"报名奖",isVHtml:!1,desc:"完成报名的所有用户",id:4},{name:"参赛奖",isVHtml:!1,desc:"报名且至少完整参赛一场的所有参赛用户",id:5}]}),computed:{rank(){var e,t;return"".concat(null==(e=this.awardInfo.sendCondition)?void 0:e.startRank,"-").concat(null==(t=this.awardInfo.sendCondition)?void 0:t.endRank,"名")}},watch:{show:{handler(e){var t;this.checkId=e?null==(t=this.awardInfo)?void 0:t.rewardType:void 0},immediate:!0,deep:!0}},mounted(){this.init()},methods:{init(){var e;"undefined"!=typeof window&&(window.btnClick=this.btnClick),this.chooseAwardList=this.autoAwardList,this.oldId=null==(e=this.awardInfo)?void 0:e.rewardType},clickClose(){this.$emit("cancel",this.oldId)},onTab(e,t){this.tabIndex=t,0==this.tabIndex?this.chooseAwardList=this.autoAwardList:this.chooseAwardList=this.awardList},editRank(){this.$emit("editRank")},btnClick(){console.log("btnClick")},onChooseItem(e){14!==e.id&&(this.checkId=e.id)},clickConfirm(){this.$emit("clickConfirm",this.checkId)}}},[["render",function(e,t,s,i,o,n){const r=m("GpMatchPopupContainer");return u(),c(r,{show:s.show,"is-showpopup-close":!0,"popup-title":"选择发奖条件",onOnCancel:n.clickClose},{titleRight:h((()=>[f("div",{class:"normal-right-btn",onClick:t[0]||(t[0]=v(((...e)=>n.clickConfirm&&n.clickConfirm(...e)),["stop"]))}," 确定 ")])),content:h((()=>[f("div",{class:"press_award-way"},[f("div",{class:"press_award-tab"},[(u(!0),a(_,null,g(o.tabList,((e,t)=>(u(),a("div",{key:"key-".concat(t),class:d(["press_tab",{"press_tab-on":o.tabIndex==t}]),onClick:s=>n.onTab(e,t)},y(e.name),11,["onClick"])))),128))]),f("div",{class:"press_choose-list"},[(u(!0),a(_,null,g(o.chooseAwardList,((e,s)=>(u(),a("div",{key:"key-".concat(s),class:"press_choose-item",onClick:v((t=>n.onChooseItem(e,s)),["stop"])},[f("div",{class:d(["press_checkbox press_checkbox-mr",o.checkId===e.id?"press_checked":""])},null,2),f("div",{class:"press_choose-content"},[f("div",{class:"press_choose-name-wrap"},[f("div",{class:"press_choose-name"},y(e.name),1)]),e.isVHtml?(u(),a("div",{key:1,class:"press_choose-des"},[14===o.checkId?(u(),a("div",{key:0},[C(" 比赛结束后，系统按照"),f("span",{class:"press_light"},y(n.rank),1),C("发奖，"),f("span",{class:"press_light",onClick:t[1]||(t[1]=v(((...e)=>n.editRank&&n.editRank(...e)),["stop"]))},"修改名次>")])):(u(),a("div",{key:1},[C(" 比赛结束后，系统按照名次发奖，请先"),f("span",{class:"press_light",onClick:t[2]||(t[2]=v(((...e)=>n.editRank&&n.editRank(...e)),["stop"]))},"设置名次>")]))])):(u(),a("div",{key:0,class:"press_choose-des",innerHTML:e.desc},null,8,["innerHTML"]))])],8,["onClick"])))),128))])])])),_:1},8,["show","onOnCancel"])}],["__scopeId","data-v-838015f2"]]);const ke=t({name:"PressGpPopupSelectAwardType",components:{GpMatchPopupContainer:O},props:{show:{type:Boolean,default:!1}},data:()=>({}),methods:{onCancel(){this.$emit("cancel")},addGamePrize(){this.$emit("addGamePrize")},clickJoinOtherTeam(){this.$emit("onJoinOtherTeam")}}},[["render",function(e,t,s,i,o,n){const a=m("GpMatchPopupContainer");return u(),c(a,{"is-showpopup-close":!0,show:s.show,"popup-title":"选择添加奖品方式",onOnCancel:n.onCancel},{content:h((()=>[f("div",{class:"press_team-model"},[f("div",{class:"press_team-model-item",onClick:t[0]||(t[0]=v(((...e)=>n.addGamePrize&&n.addGamePrize(...e)),["stop"]))},[f("div",{class:"press_team-model-mask"},[f("div",{class:"press_img-add-award"}),f("div",{class:"press_btn-go"}," 添加游戏奖品 ")]),f("div",{class:"press_team-model-text"}," 官方奖励认证，便捷发奖 ")]),f("div",{class:"press_team-model-item",onClick:t[1]||(t[1]=v(((...e)=>n.clickJoinOtherTeam&&n.clickJoinOtherTeam(...e)),["stop"]))},[f("div",{class:"press_team-model-wrap"},[f("div",{class:"press_img-autofill"}),f("div",{class:"press_btn-go"}," 自定义填写 ")]),f("div",{class:"press_team-model-text"}," 手动填写奖品 ")])])])),_:1},8,["show","onOnCancel"])}],["__scopeId","data-v-303041f7"]]);const we=t({name:"PressGpPopupSelectRank",components:{GpMatchPopupContainer:O,PressPickerPlus:B},props:{popupTitle:{type:String,default:"筛选"},columnsPicker:{type:Array,default:()=>[]},show:{type:Boolean,default:!1},isShowLine:{type:Boolean,default:!1},curLeftRankIndex:{type:Number,default:0},curRightRankIndex:{type:Number,default:0},leftCol:{type:Array,default:()=>[]},rightCol:{type:Array,default:()=>[]}},data(){return{rankingMock:[{values:this.leftCol,className:"column1",defaultIndex:this.curLeftRankIndex},{values:this.rightCol,className:"column2",defaultIndex:this.curRightRankIndex}]}},computed:{},watch:{rightCol:{handler(e){this.$refs.picker&&this.$refs.picker.setColumnValues(1,e)}},leftCol:{handler(){this.rankingMock=[{values:this.leftCol,className:"column1",defaultIndex:this.curLeftRankIndex},{values:this.rightCol,className:"column2",defaultIndex:this.curRightRankIndex}]}}},mounted(){},methods:{clickClose(){this.$emit("cancel")},clickConfirm(){var e;this.$emit("rangkConfirm",null==(e=this.$refs.picker)?void 0:e.getValues())},onChange(e){this.$emit("onChangeLeft",e)}}},[["render",function(e,t,s,i,o,n){const a=m("PressPickerPlus"),r=m("GpMatchPopupContainer");return u(),c(r,{"is-showpopup-close":!0,"popup-title":s.popupTitle,show:s.show,onOnCancel:n.clickClose},{titleRight:h((()=>[f("div",{class:"press-popup__confirm",onClick:t[0]||(t[0]=v(((...e)=>n.clickConfirm&&n.clickConfirm(...e)),["stop"]))}," 确定 ")])),content:h((()=>[f("div",{class:"press_common-popup-picker"},[S(f("div",{class:"press_common-split-line"}," - ",512),[[A,s.isShowLine]]),M(a,{ref:"picker",columns:o.rankingMock,onChange:n.onChange},null,8,["columns","onChange"])])])),_:1},8,["popup-title","show","onOnCancel"])}],["__scopeId","data-v-48a28a65"]]);const be=t({name:"PressGpPopupSetAi",components:{GpMatchPopupContainer:O},props:{aiList:{type:Array,default:()=>[]},startAiId:{type:Number,default:1},show:{type:Boolean,default:!1}},emits:["selectAi","cancel","confirm"],data(){return{activeId:this.startAiId}},computed:{},watch:{startAiId:{handler(e){this.activeId=e}}},created(){},mounted(){},methods:{onSelectMatchMode(e){this.activeId=e.id,this.$emit("selectAi",e)},onCancel(){this.$emit("cancel")},clickConfirm(){this.$emit("confirm",this.activeId)}}},[["render",function(e,t,s,i,o,n){const r=m("GpMatchPopupContainer");return u(),c(r,{show:s.show,"is-showpopup-close":!0,"popup-title":"选择AI解说",onOnCancel:n.onCancel},{titleRight:h((()=>[f("div",{class:"press-gp-btn",onClick:t[0]||(t[0]=v(((...e)=>n.clickConfirm&&n.clickConfirm(...e)),["stop"]))}," 确定 ")])),content:h((()=>[f("div",{class:"press-gp-mode_group"},[(u(!0),a(_,null,g(s.aiList,((e,t)=>(u(),a("div",{key:t,class:"press-gp-mode_item",onClick:v((t=>n.onSelectMatchMode(e)),["stop"])},[f("div",{class:"press-gp-mode_content"},[f("div",{class:"press-gp-mode_name"},y(e.title),1),f("div",{class:"press-gp-mode_des"},y(e.label),1)]),f("div",{class:d(["press-gp-mode_checkbox",o.activeId===e.id?"checked":""])},null,2)],8,["onClick"])))),128))])])),_:1},8,["show","onOnCancel"])}],["__scopeId","data-v-5617a93d"]]),Pe={1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七"};function xe(e,t,s){var i;return 2==e?"手动开赛":"定时开赛(首局".concat(s(null==(i=null==t?void 0:t[0])?void 0:i.stime,"M月dd日 hh:mm"),")")}function ze(e=""){const t=e.split("-");return t[t.length-1].trim()}function Ie(e=[]){const t=e.map((e=>ze(e.module_name))).join(", ");return"共".concat(Pe[e.length],"局 (").concat(t,")")}function Te(e=[]){var t;return ze((null==(t=e[0])?void 0:t.module_name)||"")}function Me(e){return 2===e?"个人赛（单人)":"团队赛（四人)"}function Re(e){const{contacts_info:t=""}=e;let s={};try{s=JSON.parse(decodeURIComponent(t))}catch(i){}return{qRCode:(null==s?void 0:s.chat_group_code)||"",updateTime:(null==s?void 0:s.updateTime)||""}}const Le=(e="",t="")=>{const s='<div class="picker-item--match" style="position: relative;width: 100%;height: 100%;display: flex; align-items: center;justify-content: center;">'.concat(e,'\n<span class="picker-item-tag--match" style="position: absolute; top: 0; left: calc(50% + 60px);color: #fff;font-size: 10px;background: rgba(83, 0, 195, .75);width: 26px; height: 13px;line-height: 13px;">').concat(t,"</span>\n</div>");return t?{html:s}:{text:e}};function Se(e){return e.filter((e=>e.group_max_team>0)).map((e=>({nameList:e.model_name.replace(/\s/g,"").split("-"),...e}))).reduce(((e,t)=>{const[s,i]=t.nameList,o={...t,code:t.model_id,mode:s,...Le("".concat(i,"(推荐").concat(t.group_auto_team,"队)"),t.common_use?"常用":"")};return e[s]?e[s].push(o):e[s]=[o],e}),{})}function Ae({boType:e,roundTimeCfg:t=[],joinEnd:s,fixByActStartTime:i=!1,startBattleType:o=1}){const n=[],a=function(e,t){return 1==t?e+600:e}(s,o);for(let r=0;r<e;r++){const e=t[r],s=n[r-1];let o=null==e?void 0:e.stime;(!o||i&&o<a)&&(o=a+3600*r),s&&o<s.stime+3600&&(o=s.stime+3600),n.push({round_id:r+1,stime:o})}return n}function Oe(e=""){let t=[];try{t=JSON.parse(decodeURIComponent(e||"[]"))}catch(s){}return t}function Ne(e=[]){return encodeURIComponent(JSON.stringify(e))}function $e(e,t){return t(e||"","M月d日 hh:mm")}const Be=t({name:"PressGpPopupSetBo",options:{styleIsolation:"shared"},components:{GpMatchPopupContainer:O},props:{show:{type:Boolean,default:!1},innerRoundList:{type:Array,default:()=>[]},hideAddBtn:{type:Boolean,default:!1},showRound:{type:Boolean,default:!1},popUpClass:{type:String,default:""}},data:()=>({NUMBER_CHI_MAP:j,getPureMapName:ze}),methods:{onCancel(){this.$emit("cancel",!1)},clickConfirm(){this.$emit("confirm",this.innerRoundList)},clickAdd(){this.$emit("add",{value:this.innerRoundList.length+1})},showEditMode(e){this.$emit("showEditMode",e)},clickDelete(e,t){this.$emit("delete",e,t)}}},[["render",function(e,t,s,i,o,n){const r=m("GpMatchPopupContainer");return u(),c(r,{show:s.show,"is-showpopup-close":!0,"popup-title":"设置比赛局数及地图",onOnCancel:n.onCancel},{titleRight:h((()=>[f("div",{class:"press-bo__confirm",onClick:t[0]||(t[0]=v(((...e)=>n.clickConfirm&&n.clickConfirm(...e)),["stop"]))}," 确定 ")])),content:h((()=>[f("div",{class:d(["press-bo",s.popUpClass])},[f("div",{class:"press-bo__wrap"},[s.showRound?(u(),a("div",{key:0,class:"press-bo__item"},[f("div",{class:"press-bo__box"},[f("div",{class:"press-bo__title"}," 比赛局数 "),f("div",{class:"press-bo__content"},[f("div",{class:"press-bo__text"}," 共一局 ")])])])):l("",!0),(u(!0),a(_,null,g(s.innerRoundList,((e,t)=>(u(),a("div",{key:t,class:"press-bo__item",onClick:e=>n.showEditMode(t)},[f("div",{class:"press-bo__box"},[f("div",{class:"press-bo__title"}," 第"+y(o.NUMBER_CHI_MAP[t+1])+"局 ",1),f("div",{class:"press-bo__content"},[f("div",{class:"press-bo__text"},[C(y(o.getPureMapName(e.module_name))+" ",1),f("div",{class:"iconfont icon-triangle"})])])]),s.innerRoundList.length>1?(u(),a("div",{key:0,class:"iconfont icon-close",onClick:v((s=>n.clickDelete(e,t)),["stop"])},null,8,["onClick"])):l("",!0)],8,["onClick"])))),128))]),s.hideAddBtn?l("",!0):(u(),a("div",{key:0,class:"press-bo__add",onClick:t[1]||(t[1]=v(((...e)=>n.clickAdd&&n.clickAdd(...e)),["stop"]))},[f("div",{class:"press-bo__add-icon"}),C(" 添加对局 ")]))],2)])),_:1},8,["show","onOnCancel"])}],["__scopeId","data-v-4776bea1"]]);const je=t({name:"PressGpPopupStartType",components:{GpMatchPopupContainer:O},props:{roundTimeList:{type:Array,default:()=>[]},startBattleType:{type:Number,default:1},show:{type:Boolean,default:!1},timeStampFormat:{type:Function,default:()=>$}},emits:["selectMode","clickModifyTime","cancel","confirm"],data(){return{showPopover:!1,mode:this.startBattleType,innerRoundTimeList:this.roundTimeList}},computed:{firstMatchStartDesc(){var e;const t=(null==(e=this.innerRoundTimeList[0])?void 0:e.stime)||0;return this.timeStampFormat(t,"M月dd日 hh:mm")||""}},watch:{startBattleType:{handler(e){this.mode=e}},roundTimeList:{handler(e){this.innerRoundTimeList=e},deep:!0,immediate:!0}},created(){},mounted(){},methods:{onSelectMatchMode(e){this.mode=e,this.$emit("selectMode",e)},onCancel(){this.$emit("cancel")},onModifyTime(){this.mode=1,this.$emit("clickModifyTime")},clickConfirm(){this.$emit("confirm",this.mode)}}},[["render",function(e,t,s,i,o,n){const a=m("GpMatchPopupContainer");return u(),c(a,{show:s.show,"is-showpopup-close":!0,"popup-title":"选择开赛方式",onOnCancel:n.onCancel},{titleRight:h((()=>[f("div",{class:"press-type__confirm",onClick:t[0]||(t[0]=v(((...e)=>n.clickConfirm&&n.clickConfirm(...e)),["stop"]))}," 确定 ")])),content:h((()=>[f("div",{class:"press-type"},[f("div",{class:"press-type__item",onClick:t[2]||(t[2]=v((e=>n.onSelectMatchMode(1)),["stop"]))},[f("div",{class:"press-type__content"},[f("div",{class:"press-type__name"}," 定时开赛 "),f("div",{class:"press-type__desc"},[f("div",{class:"press-type__desc-light"},y(n.firstMatchStartDesc),1),C(" 后选手可开始首局比赛，默认每局比赛间隔1小时，可随时 "),f("div",{class:"press-type__desc-edit",onClick:t[1]||(t[1]=v(((...e)=>n.onModifyTime&&n.onModifyTime(...e)),["stop"]))},[C(" 修改 "),f("div",{class:"iconfont icon-back"})])])]),f("div",{class:d(["press-type__checkbox",1===o.mode?"checked":""])},null,2)]),f("div",{class:"press-type__item",onClick:t[3]||(t[3]=v((e=>n.onSelectMatchMode(2)),["stop"]))},[f("div",{class:"press-type__content"},[f("div",{class:"press-type__name"}," 手动开赛 "),f("div",{class:"press-type__desc"}," 管理员手动点击开赛，选手才能进行比赛 ")]),f("div",{class:d(["press-type__checkbox",2===o.mode?"checked":""])},null,2)])])])),_:1},8,["show","onOnCancel"])}],["__scopeId","data-v-b34af289"]]);const Fe=t({name:"PressGpPopupStartingTime",components:{GpMatchPopupContainer:O},props:{timeStampFormat:{type:Function,default:()=>$},roundTimeList:{type:Array,default:()=>[{time:Date.now()}]},show:{type:Boolean,default:!1}},data(){return{showPopover:!1,innerRoundTimeList:JSON.parse(JSON.stringify(this.roundTimeList)),NUMBER_CHI_MAP:j}},computed:{},watch:{roundTimeList:{handler(e){this.innerRoundTimeList=JSON.parse(JSON.stringify(e))}}},created(){},mounted(){},methods:{onChangeTime(e,t){this.$emit("clickTime",e,t,(e=>{this.innerRoundTimeList[t].stime=parseInt(e/1e3,10)}))},onCancel(){this.$emit("cancel")},clickConfirm(){this.$emit("update:roundTimeList",this.innerRoundTimeList),this.$emit("cancel")}}},[["render",function(e,t,s,i,o,n){const r=m("GpMatchPopupContainer");return u(),c(r,{show:s.show,"is-showpopup-close":!0,"popup-title":"设置定时开赛时间",onOnCancel:n.onCancel},{titleRight:h((()=>[f("div",{class:"press-time__confirm",onClick:t[0]||(t[0]=v(((...e)=>n.clickConfirm&&n.clickConfirm(...e)),["stop"]))}," 确定 ")])),content:h((()=>[f("div",{class:"press-time"},[(u(!0),a(_,null,g(o.innerRoundTimeList,((e,t)=>(u(),a("div",{key:t,class:"press-time__item",onClick:v((s=>n.onChangeTime(e,t)),["stop"])},[f("div",{class:"press-time__title"}," 第"+y(t+1)+"局开始 ",1),f("div",{class:"press-time__content"},[C(y(s.timeStampFormat(e.stime,"M月dd日 hh:mm"))+" ",1),f("div",{class:"iconfont icon-triangle"})])],8,["onClick"])))),128))])])),_:1},8,["show","onOnCancel"])}],["__scopeId","data-v-3ac2dd28"]]);export{Ce as A,we as C,V as D,_e as E,D as M,be as P,U as S,Fe as a,je as b,Be as c,ke as d,ye as e,ve as f,ge as g,q as h,he as i,fe as j,J as k,Ae as l,Re as m,Se as n,$e as o,Oe as p,F as q,Ie as r,Ne as s,Te as t,Me as u,xe as v,E as w,G as x};
