import{_ as a,c as t,b as i,ag as l}from"./chunks/framework.CMjv3OHl.js";const d=JSON.parse('{"title":"通过 Scheme 打开小程序","description":"","frontmatter":{},"headers":[],"relativePath":"work/78.scheme-mp.md","filePath":"work/78.scheme-mp.md","lastUpdated":1758424153000}'),s={name:"work/78.scheme-mp.md"};function m(o,e,c,h,p,r){return i(),t("div",null,e[0]||(e[0]=[l('<div class="info custom-block"><p class="custom-block-title">作者</p><p>novlan1</p><p>2025.9.15</p></div><h1 id="通过-scheme-打开小程序" tabindex="-1">通过 Scheme 打开小程序 <a class="header-anchor" href="#通过-scheme-打开小程序" aria-label="Permalink to &quot;通过 Scheme 打开小程序&quot;">​</a></h1><h2 id="_1-背景" tabindex="-1">1. 背景 <a class="header-anchor" href="#_1-背景" aria-label="Permalink to &quot;1. 背景&quot;">​</a></h2><p>Android 系统不支持直接识别 URL Scheme，用户无法通过 Scheme 正常打开小程序，需要使用 H5 页面中转，再跳转到 Scheme 实现打开小程序。官方文档地址<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/url-scheme.html" target="_blank" rel="noreferrer">在这里</a>。</p><h2 id="_2-解决方案" tabindex="-1">2. 解决方案 <a class="header-anchor" href="#_2-解决方案" aria-label="Permalink to &quot;2. 解决方案&quot;">​</a></h2><p>这里直接将 <code>html</code> 上传到 COS 上了，然后通过 CDN 链接获取。拼接链接如下，</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://image-1251917893.file.myqcloud.com/igame/html/auto-scheme-mp.html?scheme=${encodeURIComponent(scheme)}</span></span></code></pre></div><p>真实例子：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://image-1251917893.file.myqcloud.com/igame/html/auto-scheme-mp.html?scheme=weixin%3A%2F%2Fdl%2Fbusiness%2F%3Fappid%3Dwxd974aca5aa25ee3b%26path%3Dviews%2Fgame-detail%2Fgame-list-new%26query%3Dsiteid%253DJFun5xACtf59myYV2aTXYw%26env_version%3Dtrial</span></span></code></pre></div><p>好处是：</p><ol><li>不与任何业务耦合，任何业务都可以使用</li><li>性能佳，在 <code>html</code> 内置了跳转逻辑，不需要加载额外的 <code>js</code> 文件</li></ol><h2 id="_3-校验" tabindex="-1">3. 校验 <a class="header-anchor" href="#_3-校验" aria-label="Permalink to &quot;3. 校验&quot;">​</a></h2><p>2025.9.20 更新</p><p>对参数进行了校验，排除：</p><ol><li>非小程序 <code>scheme</code> 的 URL 链接</li><li>不在白名单的小程序</li></ol><p>测试：</p><ul><li>Open Redirect: <a href="https://image-1251917893.file.myqcloud.com/igame/html/auto-scheme-mp.html?scheme=https%3A%2F%2Fevil.com" target="_blank" rel="noreferrer">https://image-1251917893.file.myqcloud.com/igame/html/auto-scheme-mp.html?scheme=https%3A%2F%2Fevil.com</a></li><li>XSS: <a href="https://image-1251917893.file.myqcloud.com/igame/html/auto-scheme-mp.html?scheme=javascript%3Aalert(1)%3B" target="_blank" rel="noreferrer">https://image-1251917893.file.myqcloud.com/igame/html/auto-scheme-mp.html?scheme=javascript%3Aalert(1)%3B</a></li><li>有效: <a href="https://image-1251917893.file.myqcloud.com/igame/html/auto-scheme-mp.html?scheme=weixin%3A%2F%2Fdl%2Fbusiness%2F%3Fappid%3Dwxd974aca5aa25ee3b%26path%3Dviews%2Fgame-detail%2Fgame-list-new%26query%3Dsiteid%253DJFun5xACtf59myYV2aTXYw%26env_version%3Dtrial" target="_blank" rel="noreferrer">https://image-1251917893.file.myqcloud.com/igame/html/auto-scheme-mp.html?scheme=weixin%3A%2F%2Fdl%2Fbusiness%2F%3Fappid%3Dwxd974aca5aa25ee3b%26path%3Dviews%2Fgame-detail%2Fgame-list-new%26query%3Dsiteid%253DJFun5xACtf59myYV2aTXYw%26env_version%3Dtrial</a></li></ul>',17)]))}const u=a(s,[["render",m]]);export{d as __pageData,u as default};
