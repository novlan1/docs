(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{451:function(t,s,a){"use strict";a.r(s);var n=a(27),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"产物文件大小分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#产物文件大小分析"}},[t._v("#")]),t._v(" 产物文件大小分析")]),t._v(" "),a("p",{attrs:{align:"center"}},[a("img",{attrs:{src:"https://img.shields.io/npm/dw/@plugin-light/vite-plugin-analyze-bundle-file-size"}}),t._v(" "),a("img",{attrs:{src:"https://img.shields.io/npm/unpacked-size/@plugin-light/vite-plugin-analyze-bundle-file-size"}}),t._v(" "),a("img",{attrs:{src:"https://img.shields.io/npm/v/@plugin-light/vite-plugin-analyze-bundle-file-size"}}),t._v(" "),a("img",{attrs:{src:"https://img.shields.io/npm/l/@plugin-light/vite-plugin-analyze-bundle-file-size"}}),t._v(" "),a("img",{attrs:{src:"https://img.shields.io/github/last-commit/novlan1/plugin-light"}}),t._v(" "),a("img",{attrs:{src:"https://img.shields.io/github/created-at/novlan1/plugin-light"}})]),t._v(" "),a("p",[t._v("小程序下，对组件的模板（"),a("code",[t._v("wxml/qml")]),t._v("等）、样式（"),a("code",[t._v("wxss/qss")]),t._v("等）、脚本文件（"),a("code",[t._v(".js")]),t._v("）大小的分析。")]),t._v(" "),a("p",[t._v("本插件解决的痛点是，"),a("strong",[t._v("帮助开发者快速定位哪些组件问题最大、最亟需优化")]),t._v("。")]),t._v(" "),a("p",[t._v("插件会获取每个组件（包括页面）的上述三种产物的大小，以及样式与模板的体积比例、模板与脚本的体积比例，输出为 "),a("code",[t._v("json")]),t._v(" 文件和 "),a("code",[t._v("csv")]),t._v(" 文件，名称前缀均为"),a("code",[t._v("analyze-bundle-file-size")]),t._v("。")]),t._v(" "),a("p",[t._v("开发者可以据此进行分析，一般来说，"),a("strong",[t._v("样式模板体积比（"),a("code",[t._v("cssHtmlRatio")]),t._v("）特别大的组件（基础组件除外），往往存在大量无用样式")]),t._v("。")]),t._v(" "),a("p",[t._v("可利用 "),a("code",[t._v("Excel")]),t._v(" 中的自定义排序，对 "),a("code",[t._v("cssHtmlRatio")]),t._v(" 进行降序，进而确定优化目标及优先级。")]),t._v(" "),a("a",{attrs:{href:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2024/12/own_mike_bec1b61c4ac07795da.png"}},[a("img",{attrs:{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2024/12/own_mike_bec1b61c4ac07795da.png",width:"600"}})]),t._v(" "),a("h3",{attrs:{id:"如何使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何使用"}},[t._v("#")]),t._v(" 如何使用")]),t._v(" "),a("p",[t._v("安装")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" @plugin-light/vite-plugin-analyze-bundle-file-size "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v("\n")])])]),a("p",[t._v("在 "),a("code",[t._v("vite.config.ts")]),t._v(" 中添加如下设置：")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineConfig "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vite'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" analyzeBundleFileSizeVitePlugin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@plugin-light/vite-plugin-analyze-bundle-file-size'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("analyzeBundleFileSizeVitePlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"更新日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新日志"}},[t._v("#")]),t._v(" 更新日志")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/changelog/vite-plugin-analyze-bundle-file-size.html"}},[t._v("点此查看")])],1)])}),[],!1,null,null,null);s.default=e.exports}}]);