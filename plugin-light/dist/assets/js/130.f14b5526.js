(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{440:function(t,s,e){"use strict";e.r(s);var a=e(27),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"vite-项目基础配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vite-项目基础配置"}},[t._v("#")]),t._v(" Vite 项目基础配置")]),t._v(" "),e("p",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://img.shields.io/npm/dw/@plugin-light/project-config-vite"}}),t._v(" "),e("img",{attrs:{src:"https://img.shields.io/npm/unpacked-size/@plugin-light/project-config-vite"}}),t._v(" "),e("img",{attrs:{src:"https://img.shields.io/npm/v/@plugin-light/project-config-vite"}}),t._v(" "),e("img",{attrs:{src:"https://img.shields.io/npm/l/@plugin-light/project-config-vite"}}),t._v(" "),e("img",{attrs:{src:"https://img.shields.io/github/last-commit/novlan1/plugin-light"}}),t._v(" "),e("img",{attrs:{src:"https://img.shields.io/github/created-at/novlan1/plugin-light"}})]),t._v(" "),e("p",[t._v("封装 "),e("code",[t._v("vite.config.ts")]),t._v(" 的基本配置，开箱即用。")]),t._v(" "),e("h3",{attrs:{id:"_1-如何使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-如何使用"}},[t._v("#")]),t._v(" 1. 如何使用")]),t._v(" "),e("p",[t._v("安装")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" @plugin-light/project-config-vite "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v("\n")])])]),e("p",[t._v("在 "),e("code",[t._v("vite.config.ts")]),t._v(" 中添加如下设置：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" getViteBaseConfig "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@plugin-light/project-config-vite"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineConfig "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vite"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mode "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getViteBaseConfig")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mode "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"_2-参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-参数"}},[t._v("#")]),t._v(" 2. 参数")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/novlan1/plugin-light/blob/master/packages/project-config-vite/src/types.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("完整类型定义"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("属性")]),t._v(" "),e("th",[t._v("类型")]),t._v(" "),e("th",[t._v("说明")]),t._v(" "),e("th",[t._v("默认值")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("mode")]),t._v(" "),e("td",[e("code",[t._v("string")])]),t._v(" "),e("td",[t._v("模式，对应 Vite 中 "),e("code",[t._v("defineConfig")]),t._v(" 的 "),e("code",[t._v("mode")]),t._v(" 参数")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("serverPort")]),t._v(" "),e("td",[e("code",[t._v("number")])]),t._v(" "),e("td",[t._v("本地开发端口（不传会取 "),e("code",[t._v("process.env.VUE_APP_PORT")]),t._v("，或 "),e("code",[t._v("443")]),t._v("）")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("serverHttps")]),t._v(" "),e("td",[e("code",[t._v("Server")])]),t._v(" "),e("td",[t._v("本地开发是否是 "),e("code",[t._v("https")])]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("serverHost")]),t._v(" "),e("td",[e("code",[t._v("string")]),t._v(" | "),e("code",[t._v("boolean")])]),t._v(" "),e("td",[t._v("传给 "),e("code",[t._v("server.host")]),t._v("（参考 "),e("a",{attrs:{href:"https://cn.vitejs.dev/config/server-options.html#server-host",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vite 文档"),e("OutboundLink")],1),t._v("）")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("optimizeDepsIncludes")]),t._v(" "),e("td",[e("code",[t._v("Array<string>")])]),t._v(" "),e("td",[t._v("对应 "),e("code",[t._v("optimizeDeps.include")])]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("optimizeDepsExcludes")]),t._v(" "),e("td",[e("code",[t._v("Array<string>")])]),t._v(" "),e("td",[t._v("对应 "),e("code",[t._v("optimizeDeps.exclude")])]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("addCodeAtEndOptions")]),t._v(" "),e("td",[e("code",[t._v("IAddCodeAtEndOptions")]),t._v(" | "),e("code",[t._v("boolean")])]),t._v(" "),e("td",[e("code",[t._v("add-code-at-end")]),t._v(" 插件参数")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("pressUiAlias")]),t._v(" "),e("td",[e("code",[t._v("string")])]),t._v(" "),e("td",[e("code",[t._v("press-ui")]),t._v(" 本地的 "),e("code",[t._v("alias")]),t._v(" 配置")]),t._v(" "),e("td",[e("code",[t._v("src/library/press-ui")])])]),t._v(" "),e("tr",[e("td",[t._v("pressPlusAlias")]),t._v(" "),e("td",[e("code",[t._v("string")])]),t._v(" "),e("td",[e("code",[t._v("press-plus")]),t._v(" 本地的 "),e("code",[t._v("alias")]),t._v(" 配置")]),t._v(" "),e("td",[e("code",[t._v("src/library/press-plus")])])]),t._v(" "),e("tr",[e("td",[t._v("aliasForLibraryOptions")]),t._v(" "),e("td",[e("code",[t._v("IAliasForLibraryOptions")])]),t._v(" "),e("td",[e("code",[t._v("alias-for-library")]),t._v(" 插件参数")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("pmdAliasMap")]),t._v(" "),e("td",[e("code",[t._v("Record<string, string>")])]),t._v(" "),e("td",[e("code",[t._v("pmd-tools")]),t._v(" 之类的别名映射")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("customElements")]),t._v(" "),e("td",[e("code",[t._v("Array<string>")])]),t._v(" "),e("td",[t._v("自定义元素配置")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("useCdn")]),t._v(" "),e("td",[e("code",[t._v("boolean")])]),t._v(" "),e("td",[t._v("三方库是否使用 "),e("code",[t._v("cdn")]),t._v(" 链接（比如 "),e("code",[t._v("vue")]),t._v("，"),e("code",[t._v("vue-router")]),t._v("）")]),t._v(" "),e("td",[e("code",[t._v("false")])])]),t._v(" "),e("tr",[e("td",[t._v("useElementPlusCDN")]),t._v(" "),e("td",[e("code",[t._v("boolean")])]),t._v(" "),e("td",[t._v("是否使用 "),e("code",[t._v("element-plus")]),t._v(" 的 "),e("code",[t._v("cdn")])]),t._v(" "),e("td",[e("code",[t._v("false")])])]),t._v(" "),e("tr",[e("td",[t._v("mkcertOptions")]),t._v(" "),e("td",[e("code",[t._v("boolean")]),t._v(" | "),e("code",[t._v("MkcertPluginOptions")])]),t._v(" "),e("td",[e("code",[t._v("vite-plugin-mkcert")]),t._v(" 参数")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("prePlugins")]),t._v(" "),e("td",[e("code",[t._v("Array<Plugin>")])]),t._v(" "),e("td",[t._v("前置插件")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("postPlugins")]),t._v(" "),e("td",[e("code",[t._v("Array<Plugin>")])]),t._v(" "),e("td",[t._v("后置插件")]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[t._v("autoImportVant")]),t._v(" "),e("td",[e("code",[t._v("boolean")]),t._v(" | "),e("code",[t._v("VantResolverOptions")])]),t._v(" "),e("td",[t._v("是否自动导入 "),e("code",[t._v("vant")])]),t._v(" "),e("td",[e("code",[t._v("true")])])]),t._v(" "),e("tr",[e("td",[t._v("autoImportElementPlus")]),t._v(" "),e("td",[e("code",[t._v("boolean")]),t._v(" | "),e("code",[t._v("ElementPlusResolverOptions")])]),t._v(" "),e("td",[t._v("是否自动导入 "),e("code",[t._v("element-plus")])]),t._v(" "),e("td",[e("code",[t._v("true")])])]),t._v(" "),e("tr",[e("td",[t._v("autoImportTDesign")]),t._v(" "),e("td",[e("code",[t._v("boolean")]),t._v(" | "),e("code",[t._v("TDesignResolverOptions")])]),t._v(" "),e("td",[t._v("是否自动导入 "),e("code",[t._v("tdesign")])]),t._v(" "),e("td",[e("code",[t._v("{ library: 'vue-next' }")])])])])]),t._v(" "),e("h3",{attrs:{id:"_3-常见问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-常见问题"}},[t._v("#")]),t._v(" 3. 常见问题")]),t._v(" "),e("h4",{attrs:{id:"_3-1-支持的-node-js-版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-支持的-node-js-版本"}},[t._v("#")]),t._v(" 3.1. 支持的 "),e("code",[t._v("node.js")]),t._v(" 版本")]),t._v(" "),e("p",[e("code",[t._v("node.js")]),t._v(" 版本 >= 16")]),t._v(" "),e("h4",{attrs:{id:"_3-2-环境变量如何注入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-环境变量如何注入"}},[t._v("#")]),t._v(" 3.2. 环境变量如何注入")]),t._v(" "),e("p",[t._v("支持在环境变量文件中配置 "),e("code",[t._v("VUE_APP_DIR")]),t._v("，环境变量文件可以是 "),e("code",[t._v(".env")]),t._v(", "),e("code",[t._v(".env.local")]),t._v(" 等")]),t._v(" "),e("p",[t._v("也支持不配置，此时应用入口是 "),e("code",[t._v("src/main.ts")]),t._v("，即非 "),e("code",[t._v("monorepo")]),t._v(" 模式")]),t._v(" "),e("h4",{attrs:{id:"_3-3-如何进行打包产物分析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-如何进行打包产物分析"}},[t._v("#")]),t._v(" 3.3. 如何进行打包产物分析")]),t._v(" "),e("p",[t._v("当 "),e("code",[t._v("process.env.VITE_VISUALIZER")]),t._v(" 不为 "),e("code",[t._v("falsy")]),t._v(" 时，本工具会使用 "),e("code",[t._v("rollup-plugin-visualizer")]),t._v(" 插件，开发者可用来进行打包分析。")]),t._v(" "),e("h4",{attrs:{id:"_3-4-如何兼容的-vue-默认导出"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-如何兼容的-vue-默认导出"}},[t._v("#")]),t._v(" 3.4. 如何兼容的 Vue 默认导出")]),t._v(" "),e("p",[t._v("内部使用了 "),e("RouterLink",{attrs:{to:"/zh/vite-plugin-export-default-in-vue.html"}},[t._v("vite-plugin-export-default-in-vue")]),t._v("，来兼容 "),e("code",[t._v("Vue2.x")]),t._v(" 时期的默认导入 Vue 对象。")],1),t._v(" "),e("p",[t._v("业务无感知，无影响。")]),t._v(" "),e("h4",{attrs:{id:"_3-5-optimizedepsincludes-含义是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-optimizedepsincludes-含义是什么"}},[t._v("#")]),t._v(" 3.5. optimizeDepsIncludes 含义是什么")]),t._v(" "),e("p",[t._v("对应 "),e("a",{attrs:{href:"https://vite.dev/config/dep-optimization-options.html#optimizedeps-include",target:"_blank",rel:"noopener noreferrer"}},[t._v("optimizeDeps.include"),e("OutboundLink")],1),t._v("，业务中常用到的有：")]),t._v(" "),e("ul",[e("li",[t._v("md5")]),t._v(" "),e("li",[t._v("js-cookie")]),t._v(" "),e("li",[t._v("qs")]),t._v(" "),e("li",[t._v("axios")])]),t._v(" "),e("h4",{attrs:{id:"_3-6-vite-升级之后可能会出现的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-vite-升级之后可能会出现的问题"}},[t._v("#")]),t._v(" 3.6. Vite 升级之后可能会出现的问题")]),t._v(" "),e("p",[t._v("Vie 被曝出有"),e("a",{attrs:{href:"https://github.com/vitejs/vite/security/advisories/GHSA-x574-m823-4x7w",target:"_blank",rel:"noopener noreferrer"}},[t._v("安全漏洞"),e("OutboundLink")],1),t._v("，需升级到  "),e("code",[t._v("6.2.3+")]),t._v("。")]),t._v(" "),e("p",[t._v("升级之后可能对前端项目有几个影响。")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("press-ui")]),t._v(" 中某些变量无法识别")])]),t._v(" "),e("img",{attrs:{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/4/own_mike_cf26d1ad18a538de18.png",width:"800"}}),t._v(" "),e("p",[t._v("解决办法为，设置 "),e("code",[t._v("useCdn")]),t._v(" 为 "),e("code",[t._v("false")]),t._v("。")]),t._v(" "),e("div",{staticClass:"language-ts extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getViteBaseConfig")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  useCdn"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[e("code",[t._v("Promise.allSettled")]),t._v(" 报错")])]),t._v(" "),e("p",[t._v("这是因为 Vite 使用了较高级的语法，"),e("a",{attrs:{href:"https://github.com/vitejs/vite/pull/19805",target:"_blank",rel:"noopener noreferrer"}},[t._v("某些低版本浏览器不支持"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("p",[t._v("解决办法为，手动 "),e("code",[t._v("polyfill")]),t._v("。或升级 Vite 最新版本。")]),t._v(" "),e("h4",{attrs:{id:"_3-7-业务中获取分支名等变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-业务中获取分支名等变量"}},[t._v("#")]),t._v(" 3.7. 业务中获取分支名等变量")]),t._v(" "),e("p",[t._v("流水线会注入以下环境变量：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 分支")]),t._v("\nVITE_PUBLISH_BRANCH\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 发布人")]),t._v("\nVITE_PUBLISH_AUTHOR\n")])])]),e("p",[t._v("业务可以参考下面的方式获取：")]),t._v(" "),e("div",{staticClass:"language-ts extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CUR_BRANCH")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VITE_PUBLISH_BRANCH")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'develop'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\/")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" shareUrl "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token template-string"}},[e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("https://foo/bar.")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CUR_BRANCH")]),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n")])])]),e("h4",{attrs:{id:"_3-8-windows-编译慢的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-windows-编译慢的问题"}},[t._v("#")]),t._v(" 3.8. windows 编译慢的问题")]),t._v(" "),e("p",[t._v("可以给 "),e("code",[t._v("getViteBaseConfig")]),t._v(" 传递以下参数，禁用掉一些三方库的 "),e("code",[t._v("alias")]),t._v(" 逻辑。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getViteBaseConfig")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("aliasForLibraryOptions")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pressPlusAlias")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pressUiAlias")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pmdAliasMap")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 按需添加")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("optimizeDepsIncludes")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'md5'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js-cookie'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("注意：")]),t._v(" "),e("ul",[e("li",[t._v("需安装最新版本的 "),e("code",[t._v("press-ui")]),t._v("、"),e("code",[t._v("@plugin-light/project-config-vite")]),t._v(" 等底层库")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vitejs/vite/blob/v6.3.1/packages/vite/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("vite"),e("OutboundLink")],1),t._v(" 版本需 "),e("code",[t._v(">=6.3.1+")])]),t._v(" "),e("li",[t._v("三方库的 "),e("code",[t._v("javascript")]),t._v(" 文件需自行处理条件编译等语法")])]),t._v(" "),e("p",[t._v("效果对比，之前：")]),t._v(" "),e("img",{attrs:{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/4/own_mike_5cHAyptEeFXmTShB.png",width:"800"}}),t._v(" "),e("p",[t._v("之后：")]),t._v(" "),e("img",{attrs:{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2025/4/own_mike_Tbtn6PNK7P5Gxse6.png",width:"800"}}),t._v(" "),e("p",[t._v("原理：")]),t._v(" "),e("p",[t._v("Vite 最新版本会编译三方库的非 "),e("code",[t._v("javascript")]),t._v(" 文件，所以不再需要 "),e("code",[t._v("alias")]),t._v(" 逻辑，"),e("code",[t._v("javascript")]),t._v(" 文件需自行处理。")]),t._v(" "),e("h3",{attrs:{id:"_4-更新日志"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-更新日志"}},[t._v("#")]),t._v(" 4. 更新日志")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/changelog/project-config-vite.html"}},[t._v("点此查看")])],1)])}),[],!1,null,null,null);s.default=n.exports}}]);